<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•­ê³µê¶Œ ì‹ ì²­ ê´€ë¦¬ - ì„¸ì¢…í•™ë‹¹ ë¬¸í™”ì¸í„´ ì§€ì› ì‹œìŠ¤í…œ</title>
    
    <!-- ğŸ”§ v10.0.0 CSS Files (Phase 2 UI êµ¬ì¡° ê°œì„ ) -->
    <link rel="stylesheet" href="../css/main.css?v=10.0.0">
    <link rel="stylesheet" href="../css/admin.css?v=10.0.0">
    <link rel="stylesheet" href="../css/lesson-plan.css?v=10.0.0">
    <link rel="stylesheet" href="../css/admin-addon.css?v=10.0.0">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Supabase JavaScript Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- ğŸ¨ í•­ê³µê¶Œ ê´€ë¦¬ ì „ìš© ìŠ¤íƒ€ì¼ v10.0.0 -->
    <style>
        .flight-management-container {
            min-height: 100vh;
            background: #f7fafc;
            padding: 2rem;
        }

        .management-header {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-title h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 0.5rem 0;
        }

        .header-title p {
            color: #718096;
            margin: 0;
            line-height: 1.5;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .back-btn, .header-btn {
            background: #e2e8f0;
            color: #4a5568;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .back-btn:hover, .header-btn:hover {
            background: #cbd5e0;
        }

        .header-btn.success {
            background: #38a169;
            color: white;
        }

        .header-btn.success:hover {
            background: #2f855a;
        }

        .header-btn.primary {
            background: #3182ce;
            color: white;
        }

        .header-btn.primary:hover {
            background: #2c5282;
        }

        /* ğŸ†• v10.0.0 Phase 1 ì™„ë£Œ ì•Œë¦¼ */
        .phase-completion-notice {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .phase-completion-notice i {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .phase-completion-notice .notice-content {
            flex: 1;
        }

        .phase-completion-notice .notice-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .phase-completion-notice .notice-text {
            font-size: 0.9rem;
            opacity: 0.9;
            margin: 0;
        }

        /* ğŸ¨ í†µê³„ ì¹´ë“œ ê·¸ë¦¬ë“œ (v10.0.0 ê°œì„ ) */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .stat-icon.blue { background: linear-gradient(135deg, #3182ce, #2c5282); }
        .stat-icon.orange { background: linear-gradient(135deg, #ed8936, #dd6b20); }
        .stat-icon.green { background: linear-gradient(135deg, #38a169, #2f855a); }
        .stat-icon.purple { background: linear-gradient(135deg, #805ad5, #6b46c1); }
        .stat-icon.red { background: linear-gradient(135deg, #e53e3e, #c53030); }
        .stat-icon.indigo { background: linear-gradient(135deg, #5a67d8, #4c51bf); }

        .stat-info {
            flex: 1;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #718096;
            margin: 0 0 0.25rem 0;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0;
            line-height: 1.2;
        }

        /* ğŸ†• ì˜ˆì‚° í˜„í™© ì„¹ì…˜ */
        .budget-overview-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .budget-overview-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 1.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .budget-summary-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .budget-summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: #f7fafc;
            border-radius: 0.75rem;
            border-left: 4px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        .budget-summary-item:hover {
            background: #edf2f7;
            transform: translateY(-1px);
        }

        .budget-summary-item.primary {
            background: linear-gradient(135deg, #ebf8ff, #e6fffa);
            border-left-color: #3182ce;
        }

        .budget-summary-item.primary .budget-amount {
            color: #2c5282;
            font-weight: 700;
        }

        .budget-label {
            font-weight: 500;
            color: #4a5568;
        }

        .budget-amount {
            font-weight: 600;
            color: #2d3748;
            font-size: 1.1rem;
        }

        /* ğŸ›ï¸ í•„í„° ë° ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls-section {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .control-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #e2e8f0;
            background: white;
            color: #4a5568;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .filter-btn:hover {
            border-color: #cbd5e0;
            background: #f7fafc;
        }

        .filter-btn.active {
            background: #3182ce;
            border-color: #3182ce;
            color: white;
        }

        .search-and-sort {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            position: relative;
            min-width: 200px;
        }

        .search-input {
            width: 100%;
            padding: 0.5rem 0.75rem 0.5rem 2.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: border-color 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #a0aec0;
            width: 16px;
            height: 16px;
        }

        .sort-select {
            padding: 0.5rem 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            background: white;
            font-size: 0.875rem;
            cursor: pointer;
            transition: border-color 0.2s ease;
        }

        .sort-select:focus {
            outline: none;
            border-color: #3182ce;
        }

        .bulk-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .bulk-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .bulk-btn.success {
            background: #38a169;
            color: white;
        }

        .bulk-btn.success:hover {
            background: #2f855a;
        }

        .bulk-btn.danger {
            background: #e53e3e;
            color: white;
        }

        .bulk-btn.danger:hover {
            background: #c53030;
        }

        /* ğŸ´ í•­ê³µê¶Œ ì‹ ì²­ ì¹´ë“œ ì‹œìŠ¤í…œ */
        .requests-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .request-group {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f7fafc;
        }

        .group-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: #2d3748;
        }

        .group-icon {
            width: 24px;
            height: 24px;
            color: #3182ce;
        }

        .group-count {
            background: #3182ce;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .group-priority {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: #fed7d7;
            color: #c53030;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .group-priority.high {
            background: #fed7d7;
            color: #c53030;
        }

        .group-priority.normal {
            background: #e6fffa;
            color: #2f855a;
        }

        .requests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 1.5rem;
        }

        /* ğŸ´ ê°œë³„ í•­ê³µê¶Œ ì‹ ì²­ ì¹´ë“œ */
        .flight-request-card {
            border: 2px solid #e2e8f0;
            border-radius: 1rem;
            padding: 1.5rem;
            background: #fafafa;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .flight-request-card:hover {
            border-color: #cbd5e0;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .flight-request-card.pending {
            border-left: 6px solid #ed8936;
        }

        .flight-request-card.approved {
            border-left: 6px solid #38a169;
        }

        .flight-request-card.rejected {
            border-left: 6px solid #e53e3e;
        }

        .flight-request-card.completed {
            border-left: 6px solid #805ad5;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .student-info h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 0.25rem 0;
        }

        .student-details {
            font-size: 0.875rem;
            color: #718096;
            line-height: 1.4;
        }

        .card-status {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .status-badge.pending {
            background: #fed7d7;
            color: #c53030;
        }

        .status-badge.approved {
            background: #c6f6d5;
            color: #2f855a;
        }

        .status-badge.rejected {
            background: #fed7d7;
            color: #c53030;
        }

        .status-badge.completed {
            background: #e9d8fd;
            color: #6b46c1;
        }

        .card-date {
            font-size: 0.75rem;
            color: #a0aec0;
        }

        .card-body {
            margin-bottom: 1.5rem;
        }

        .flight-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .detail-label {
            font-size: 0.75rem;
            color: #a0aec0;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .detail-value {
            font-size: 0.875rem;
            color: #4a5568;
            font-weight: 500;
        }

        .activity-info {
            background: #f7fafc;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .activity-info h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: #2d3748;
            margin: 0 0 0.5rem 0;
        }

        .activity-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.5rem;
            font-size: 0.75rem;
            color: #718096;
        }

        .price-info {
            background: #e6fffa;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .price-info h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: #2d3748;
            margin: 0 0 0.5rem 0;
        }

        .price-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .price-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price-label {
            font-size: 0.75rem;
            color: #718096;
        }

        .price-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: #2f855a;
        }

        .price-value.admin {
            color: #805ad5;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .action-btn.primary {
            background: #3182ce;
            color: white;
        }

        .action-btn.primary:hover {
            background: #2c5282;
        }

        .action-btn.success {
            background: #38a169;
            color: white;
        }

        .action-btn.success:hover {
            background: #2f855a;
        }

        .action-btn.danger {
            background: #e53e3e;
            color: white;
        }

        .action-btn.danger:hover {
            background: #c53030;
        }

        .action-btn.secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .action-btn.secondary:hover {
            background: #cbd5e0;
        }

        /* ë¡œë”© ë° ìƒíƒœ ê´€ë¦¬ */
        .loading-state {
            text-align: center;
            padding: 3rem;
            color: #718096;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3182ce;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-state {
            text-align: center;
            padding: 3rem;
            color: #e53e3e;
            background: #fed7d7;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .no-results {
            text-align: center;
            padding: 3rem;
            color: #718096;
            background: #f7fafc;
            border-radius: 0.5rem;
            border: 2px dashed #e2e8f0;
        }

        /* ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ í‘œì‹œ */
        .real-time-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #38a169;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transform: translateY(-100px);
            transition: transform 0.3s ease;
        }

        .real-time-indicator.show {
            transform: translateY(0);
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background: #c6f6d5;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .flight-management-container {
                padding: 1rem;
            }

            .management-header {
                padding: 1.5rem;
            }

            .header-content {
                flex-direction: column;
                align-items: stretch;
            }

            .header-actions {
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .budget-summary-list {
                grid-template-columns: 1fr;
            }

            .control-row {
                flex-direction: column;
                align-items: stretch;
            }

            .search-and-sort {
                justify-content: stretch;
            }

            .search-box {
                min-width: auto;
                flex: 1;
            }

            .requests-grid {
                grid-template-columns: 1fr;
            }

            .flight-details {
                grid-template-columns: 1fr;
            }

            .price-grid {
                grid-template-columns: 1fr;
            }

            .card-actions {
                justify-content: stretch;
            }

            .action-btn {
                flex: 1;
                justify-content: center;
            }
        }

        
        /* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
        @media print {
            .header-actions,
            .controls-section,
            .card-actions {
                display: none !important;
            }
            
            .flight-management-container {
                background: white;
                padding: 0;
            }
            
            .flight-request-card {
                break-inside: avoid;
                margin-bottom: 1rem;
            }
        }
        
            
        /* ëª¨ë‹¬ ê¸°ë³¸ êµ¬ì¡° */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }

            .modal-overlay.show {
                opacity: 1;
                visibility: visible;
            }

            .modal-container {
                background: white;
                border-radius: 1rem;
                max-width: 90vw;
                max-height: 90vh;
                overflow: hidden;
                transform: scale(0.9);
                transition: transform 0.3s ease;
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            }

            .modal-overlay.show .modal-container {
                transform: scale(1);
            }

            .modal-container.small { width: 400px; }
            .modal-container.medium { width: 600px; }
            .modal-container.large { width: 800px; }
            .modal-container.extra-large { width: 1000px; }

            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1.5rem;
                border-bottom: 1px solid #e2e8f0;
            }

            .modal-title {
                font-size: 1.25rem;
                font-weight: 700;
                color: #2d3748;
                margin: 0;
            }

            .modal-close {
                background: none;
                border: none;
                width: 32px;
                height: 32px;
                border-radius: 0.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                color: #718096;
                transition: all 0.2s ease;
            }

            .modal-close:hover {
                background: #f7fafc;
                color: #2d3748;
            }

            .modal-body {
                padding: 1.5rem;
                max-height: 60vh;
                overflow-y: auto;
            }

            .modal-footer {
                display: flex;
                justify-content: flex-end;
                gap: 0.75rem;
                padding: 1.5rem;
                border-top: 1px solid #e2e8f0;
                background: #f7fafc;
            }

            /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
            .btn {
                padding: 0.75rem 1rem;
                border: none;
                border-radius: 0.5rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                text-decoration: none;
            }

            .btn.primary {
                background: #3182ce;
                color: white;
            }

            .btn.primary:hover {
                background: #2c5282;
            }

            .btn.secondary {
                background: #e2e8f0;
                color: #4a5568;
            }

            .btn.secondary:hover {
                background: #cbd5e0;
            }

            .btn.success {
                background: #38a169;
                color: white;
            }

            .btn.success:hover {
                background: #2f855a;
            }

            .btn.danger {
                background: #e53e3e;
                color: white;
            }

            .btn.danger:hover {
                background: #c53030;
            }

            /* ë¡œë”© ì˜¤ë²„ë ˆì´ */
            .loading-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .loading-content {
                background: white;
                padding: 2rem;
                border-radius: 1rem;
                text-align: center;
                min-width: 200px;
            }

            .loading-spinner {
                border: 3px solid #f3f3f3;
                border-top: 3px solid #3182ce;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                animation: spin 1s linear infinite;
                margin: 0 auto 1rem;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
            @media (max-width: 768px) {
                .modal-container {
                    width: 95vw !important;
                    max-width: none;
                    margin: 1rem;
                }

                .modal-header,
                .modal-body,
                .modal-footer {
                    padding: 1rem;
                }
            }
        
        /* ğŸ¨ ëª¨ë‹¬ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ ê°œì„  */
            .detail-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .detail-section {
                background: #f8fafc;
                border-radius: 0.75rem;
                padding: 1.5rem;
                border: 1px solid #e2e8f0;
            }

            .detail-section.full-width {
                grid-column: 1 / -1;
            }

            .detail-section h3 {
                font-size: 1rem;
                font-weight: 600;
                color: #2d3748;
                margin: 0 0 1rem 0;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .detail-section h3 i {
                width: 16px;
                height: 16px;
                color: #4299e1;
            }

            .detail-content {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .detail-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.5rem 0;
                border-bottom: 1px solid #e2e8f0;
            }

            .detail-row:last-child {
                border-bottom: none;
            }

            .detail-label {
                font-size: 0.875rem;
                color: #718096;
                font-weight: 500;
                min-width: 100px;
            }

            .detail-value {
                font-size: 0.875rem;
                color: #2d3748;
                font-weight: 500;
                text-align: right;
                flex: 1;
            }

            .detail-value.price {
                color: #38a169;
                font-weight: 600;
            }

            .detail-value.admin {
                color: #805ad5;
            }

            .purchase-type.direct {
                color: #3182ce;
                font-weight: 600;
            }

            .purchase-type.agency {
                color: #e53e3e;
                font-weight: 600;
            }

            .status-badge {
                padding: 0.25rem 0.75rem;
                border-radius: 1rem;
                font-size: 0.75rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.025em;
            }

            .status-badge.status-pending {
                background: #fed7d7;
                color: #c53030;
            }

            .status-badge.status-approved {
                background: #c6f6d5;
                color: #2f855a;
            }

            .status-badge.status-rejected {
                background: #fed7d7;
                color: #c53030;
            }

            .status-badge.status-completed {
                background: #e9d8fd;
                color: #6b46c1;
            }

            /* ì²¨ë¶€ íŒŒì¼ ìŠ¤íƒ€ì¼ */
            .file-attachments {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
            }

            .file-attachment {
                border: 2px dashed #e2e8f0;
                border-radius: 0.5rem;
                padding: 1rem;
                text-align: center;
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .file-attachment:hover {
                border-color: #3182ce;
                background: #f7fafc;
            }

            .file-attachment i {
                width: 32px;
                height: 32px;
                margin: 0 auto 0.5rem;
                color: #a0aec0;
            }

            /* ìŠ¹ì¸/ë°˜ë ¤ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
            .request-summary {
                background: #f8fafc;
                border-radius: 0.75rem;
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                border: 1px solid #e2e8f0;
            }

            .request-summary h4 {
                font-size: 1rem;
                font-weight: 600;
                color: #2d3748;
                margin: 0 0 1rem 0;
            }

            .summary-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.5rem 0;
                border-bottom: 1px solid #e2e8f0;
            }

            .summary-item:last-child {
                border-bottom: none;
            }

            .summary-item .label {
                font-size: 0.875rem;
                color: #718096;
                font-weight: 500;
            }

            .summary-item .value {
                font-size: 0.875rem;
                color: #2d3748;
                font-weight: 600;
            }

            .form-group {
                margin-bottom: 1.5rem;
            }

            .form-group label {
                display: block;
                font-size: 0.875rem;
                font-weight: 600;
                color: #2d3748;
                margin-bottom: 0.5rem;
            }

            .form-group.required label::after {
                content: " *";
                color: #e53e3e;
            }

            .form-group textarea,
            .form-group input {
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e2e8f0;
                border-radius: 0.5rem;
                font-size: 0.875rem;
                transition: border-color 0.2s ease;
                resize: vertical;
            }

            .form-group textarea:focus,
            .form-group input:focus {
                outline: none;
                border-color: #3182ce;
                box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
            }

            .help-text {
                font-size: 0.75rem;
                color: #718096;
                margin-top: 0.25rem;
            }

            /* ê²½ê³ /ì •ë³´ ë°•ìŠ¤ */
            .warning-box {
                background: #fffbeb;
                border: 1px solid #f6ad55;
                border-radius: 0.5rem;
                padding: 1rem;
                margin-top: 1rem;
                display: flex;
                gap: 0.75rem;
            }

            .warning-box.danger {
                background: #fed7d7;
                border-color: #fc8181;
            }

            .info-box {
                background: #ebf8ff;
                border: 1px solid #90cdf4;
                border-radius: 0.5rem;
                padding: 1rem;
                margin-top: 1rem;
                display: flex;
                gap: 0.75rem;
            }

            .warning-box i,
            .info-box i {
                width: 20px;
                height: 20px;
                flex-shrink: 0;
                margin-top: 0.125rem;
            }

            .warning-box strong,
            .info-box strong {
                display: block;
                margin-bottom: 0.5rem;
                font-size: 0.875rem;
            }

            .warning-box ul,
            .info-box ul {
                margin: 0;
                padding-left: 1rem;
                list-style-type: disc;
            }

            .warning-box li,
            .info-box li {
                font-size: 0.875rem;
                line-height: 1.5;
                margin-bottom: 0.25rem;
            }

            /* ë°˜ë£Œ ì‚¬ìœ  ë²„íŠ¼ë“¤ */
            .common-reasons {
                margin-bottom: 1.5rem;
            }

            .common-reasons h5 {
                font-size: 0.875rem;
                font-weight: 600;
                color: #2d3748;
                margin: 0 0 0.75rem 0;
            }

            .reason-buttons {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .reason-btn {
                background: #edf2f7;
                border: 1px solid #e2e8f0;
                padding: 0.5rem 0.75rem;
                border-radius: 0.375rem;
                font-size: 0.75rem;
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .reason-btn:hover {
                background: #e2e8f0;
                border-color: #cbd5e0;
            }

            /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
            @media (max-width: 768px) {
                .detail-grid {
                    grid-template-columns: 1fr;
                }

                .detail-row {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 0.25rem;
                }

                .detail-label {
                    min-width: auto;
                }

                .detail-value {
                    text-align: left;
                }

                .file-attachments {
                    grid-template-columns: 1fr;
                }

                .reason-buttons {
                    flex-direction: column;
                }
            }
        
        /* ğŸ“ ì²¨ë¶€ íŒŒì¼ ë³´ê¸° ì „ìš© ìŠ¤íƒ€ì¼ */
            .files-view-list {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .file-view-item {
                display: flex;
                align-items: center;
                padding: 1rem;
                background: white;
                border: 1px solid #e2e8f0;
                border-radius: 0.5rem;
                transition: all 0.2s ease;
            }

            .file-view-item:hover {
                border-color: #cbd5e0;
                background: #f8fafc;
            }

            .file-view-item.admin-file {
                background: linear-gradient(135deg, #faf5ff, #f3e8ff);
                border-color: #d6bcfa;
            }

            .file-icon {
                width: 40px;
                height: 40px;
                background: linear-gradient(135deg, #4299e1, #3182ce);
                border-radius: 0.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 1rem;
                flex-shrink: 0;
            }

            .file-icon.link-icon {
                background: linear-gradient(135deg, #38a169, #2f855a);
            }

            .file-icon.receipt-icon {
                background: linear-gradient(135deg, #ed8936, #dd6b20);
            }

            .file-icon.admin-icon {
                background: linear-gradient(135deg, #805ad5, #6b46c1);
            }

            .file-icon i {
                width: 20px;
                height: 20px;
                color: white;
            }

            .file-details {
                flex: 1;
                min-width: 0;
            }

            .file-details h5 {
                font-size: 0.875rem;
                font-weight: 600;
                color: #2d3748;
                margin: 0 0 0.25rem 0;
            }

            .file-details p {
                font-size: 0.75rem;
                color: #718096;
                margin: 0;
                line-height: 1.4;
            }

            .file-view-actions {
                flex-shrink: 0;
            }

            .view-btn {
                display: flex;
                align-items: center;
                gap: 0.375rem;
                padding: 0.5rem 0.75rem;
                background: #3182ce;
                color: white;
                border: none;
                border-radius: 0.375rem;
                font-size: 0.75rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .view-btn:hover {
                background: #2c5282;
                transform: translateY(-1px);
            }

            .view-btn i {
                width: 14px;
                height: 14px;
            }

            .no-files-message {
                text-align: center;
                padding: 2rem;
                color: #a0aec0;
                background: #f8fafc;
                border: 2px dashed #e2e8f0;
                border-radius: 0.5rem;
            }

            .no-files-message p {
                margin: 0;
                font-size: 0.875rem;
            }

            /* ëª¨ë°”ì¼ ìµœì í™” */
            @media (max-width: 768px) {
                .file-view-item {
                    padding: 0.75rem;
                }

                .file-icon {
                    width: 36px;
                    height: 36px;
                    margin-right: 0.75rem;
                }

                .file-icon i {
                    width: 18px;
                    height: 18px;
                }

                .view-btn {
                    padding: 0.375rem 0.5rem;
                    font-size: 0.7rem;
                }
            }
        
    </style>
</head>
<body>
    <div class="flight-management-container">
        <!-- ğŸ“± í—¤ë” ì„¹ì…˜ -->
        <div class="management-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>í•­ê³µê¶Œ ì‹ ì²­ ê´€ë¦¬</h1>
                    <p>í•™ìƒë“¤ì˜ í•­ê³µê¶Œ êµ¬ë§¤ ì‹ ì²­ì„ ê²€í† í•˜ê³  ìŠ¹ì¸ ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™” ë° í–¥ìƒëœ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                </div>
                <div class="header-actions">
                    <button class="back-btn" onclick="goBackToDashboard()">
                        <i data-lucide="arrow-left"></i>
                        ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                    </button>
                    <button id="exportBtn" class="header-btn success">
                        <i data-lucide="download"></i>
                        Excel ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button id="realTimeToggle" class="header-btn primary">
                        <i data-lucide="refresh-cw"></i>
                        ì‹¤ì‹œê°„ ë™ê¸°í™”: ì¼œì§
                    </button>
                </div>
            </div>
        </div>

        <!-- ğŸ†• v10.0.0 Phase 2 ì™„ë£Œ ì•Œë¦¼ -->
        <div class="phase-completion-notice">
            <i data-lucide="rocket"></i>
            <div class="notice-content">
                <div class="notice-title">ğŸš€ v10.0.0 Phase 2 ì™„ë£Œ! ì¹´ë“œ ì‹œìŠ¤í…œ & í†µê³„ & ì»¨íŠ¸ë¡¤ ì™„ì„±</div>
                <p class="notice-text">FlightManagementSystem í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶• ì™„ë£Œ â€¢ ì¹´ë“œ ë Œë”ë§ ì‹œìŠ¤í…œ â€¢ ì‹¤ì‹œê°„ í†µê³„ â€¢ ê³ ê¸‰ í•„í„°ë§ â€¢ ì¼ê´„ ì²˜ë¦¬ â€¢ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ â€¢ Phase 3 ëª¨ë‹¬ ì¤€ë¹„</p>
            </div>
        </div>

        <!-- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ í‘œì‹œ -->
        <div id="realTimeIndicator" class="real-time-indicator">
            <div class="pulse-dot"></div>
            <span>ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</span>
        </div>

        <!-- ë¡œë”© ìƒíƒœ -->
        <div id="loadingState" class="loading-state">
            <div class="loading-spinner"></div>
            <p>í•­ê³µê¶Œ ì‹ ì²­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>

        <!-- ì—ëŸ¬ ìƒíƒœ -->
        <div id="errorState" class="error-state" style="display: none;">
            <i data-lucide="alert-triangle" style="width: 48px; height: 48px; margin: 0 auto 1rem;"></i>
            <h3>ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜</h3>
            <p>í•­ê³µê¶Œ ì‹ ì²­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            <button class="header-btn primary" onclick="retryDataLoad()">ë‹¤ì‹œ ì‹œë„</button>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div id="mainContent" style="display: none;">
            <!-- ğŸ“Š í•µì‹¬ í†µê³„ ì¹´ë“œ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <i data-lucide="users" class="stat-icon blue"></i>
                    <div class="stat-info">
                        <p class="stat-label">ì „ì²´ ì‹ ì²­ììˆ˜</p>
                        <p id="stat-total" class="stat-value">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i data-lucide="clock" class="stat-icon orange"></i>
                    <div class="stat-info">
                        <p class="stat-label">ë¯¸ìŠ¹ì¸ ì•„ì´í…œ</p>
                        <p id="stat-pending" class="stat-value">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i data-lucide="check-circle" class="stat-icon green"></i>
                    <div class="stat-info">
                        <p class="stat-label">ìŠ¹ì¸ ì•„ì´í…œ</p>
                        <p id="stat-approved" class="stat-value">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i data-lucide="package" class="stat-icon purple"></i>
                    <div class="stat-info">
                        <p class="stat-label">êµ¬ë§¤ ì™„ë£Œ</p>
                        <p id="stat-completed" class="stat-value">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i data-lucide="credit-card" class="stat-icon indigo"></i>
                    <div class="stat-info">
                        <p class="stat-label">ì§ì ‘êµ¬ë§¤</p>
                        <p id="stat-direct" class="stat-value">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i data-lucide="shopping-cart" class="stat-icon red"></i>
                    <div class="stat-info">
                        <p class="stat-label">êµ¬ë§¤ëŒ€í–‰</p>
                        <p id="stat-agency" class="stat-value">0</p>
                    </div>
                </div>
            </div>

            <!-- ğŸ’° ì „ì²´ ì˜ˆì‚° í˜„í™© ì„¹ì…˜ -->
            <div class="budget-overview-section">
                <h2>
                    <i data-lucide="dollar-sign"></i>
                    ì „ì²´ ì˜ˆì‚° í˜„í™©
                </h2>
                <div class="budget-summary-list">
                    <div class="budget-summary-item primary">
                        <span class="budget-label">êµ¬ë§¤ ì™„ë£Œ ì´ì•¡</span>
                        <span id="totalCompletedAmount" class="budget-amount">0ì›</span>
                    </div>
                    <div class="budget-summary-item">
                        <span class="budget-label">ìŠ¹ì¸ëœ ì‹ ì²­ ì´ì•¡</span>
                        <span id="totalApprovedAmount" class="budget-amount">0ì›</span>
                    </div>
                    <div class="budget-summary-item">
                        <span class="budget-label">1ì¸ë‹¹ í‰ê·  ê¸ˆì•¡</span>
                        <span id="averagePerPerson" class="budget-amount">0ì›</span>
                    </div>
                    <div class="budget-summary-item">
                        <span class="budget-label">ì´ë²ˆ ë‹¬ ì‹ ì²­ ê±´ìˆ˜</span>
                        <span id="thisMonthRequests" class="budget-amount">0ê±´</span>
                    </div>
                </div>
            </div>

            <!-- ğŸ›ï¸ í•„í„° ë° ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
            <div class="controls-section">
                <div class="control-row">
                    <div class="filter-group">
                        <button class="filter-btn active" data-filter="all">ì „ì²´</button>
                        <button class="filter-btn" data-filter="pending">ëŒ€ê¸°ì¤‘</button>
                        <button class="filter-btn" data-filter="approved">ìŠ¹ì¸ë¨</button>
                        <button class="filter-btn" data-filter="completed">ì™„ë£Œ</button>
                        <button class="filter-btn" data-filter="agency">êµ¬ë§¤ëŒ€í–‰</button>
                        <button class="filter-btn" data-filter="direct">ì§ì ‘êµ¬ë§¤</button>
                        <button class="filter-btn" data-filter="urgent">ì¶œêµ­ì„ë°•</button>
                    </div>
                    
                    <div class="search-and-sort">
                        <div class="search-box">
                            <i data-lucide="search" class="search-icon"></i>
                            <input type="text" 
                                   id="searchInput" 
                                   class="search-input" 
                                   placeholder="ì´ë¦„, í•™ë‹¹, ê³µí•­ìœ¼ë¡œ ê²€ìƒ‰">
                        </div>
                        <select id="sortSelect" class="sort-select">
                            <option value="created_at-desc">ìµœì‹  ì‹ ì²­ìˆœ</option>
                            <option value="created_at-asc">ì˜¤ë˜ëœ ì‹ ì²­ìˆœ</option>
                            <option value="departure_date-asc">ì¶œêµ­ì¼ ë¹ ë¥¸ìˆœ</option>
                            <option value="departure_date-desc">ì¶œêµ­ì¼ ëŠ¦ì€ìˆœ</option>
                            <option value="name-asc">ì´ë¦„ìˆœ</option>
                            <option value="ticket_price-desc">í•­ê³µë£Œ ë†’ì€ìˆœ</option>
                            <option value="ticket_price-asc">í•­ê³µë£Œ ë‚®ì€ìˆœ</option>
                        </select>
                    </div>
                </div>

                <!-- ì¼ê´„ ì²˜ë¦¬ ë²„íŠ¼ë“¤ -->
                <div class="control-row" style="margin-top: 1rem; padding-top: 1rem; border-top: 2px solid #f7fafc;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <span style="font-size: 0.875rem; color: #718096; font-weight: 500;">ì¼ê´„ ì²˜ë¦¬:</span>
                        <div class="bulk-actions">
                            <button class="bulk-btn success" id="bulkApprove" disabled>
                                <i data-lucide="check"></i>
                                ì„ íƒ í•­ëª© ìŠ¹ì¸
                            </button>
                            <button class="bulk-btn danger" id="bulkReject" disabled>
                                <i data-lucide="x"></i>
                                ì„ íƒ í•­ëª© ë°˜ë ¤
                            </button>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; color: #718096;">
                        <span id="selectedCount">ì„ íƒëœ í•­ëª©: 0ê°œ</span>
                        <button id="selectAllBtn" class="filter-btn" style="margin: 0;">ëª¨ë‘ ì„ íƒ</button>
                        <button id="clearSelectionBtn" class="filter-btn" style="margin: 0;">ì„ íƒ í•´ì œ</button>
                    </div>
                </div>
            </div>

            <!-- ğŸ´ í•­ê³µê¶Œ ì‹ ì²­ ëª©ë¡ (ì¹´ë“œ í˜•íƒœ) -->
            <div id="requestsContainer" class="requests-container">
                <!-- ğŸ”´ êµ¬ë§¤ëŒ€í–‰ ì‹ ì²­ ê·¸ë£¹ (ìš°ì„ ìˆœìœ„ ë†’ìŒ) -->
                <div id="agencyGroup" class="request-group" style="display: none;">
                    <div class="group-header">
                        <div class="group-title">
                            <i data-lucide="shopping-cart" class="group-icon"></i>
                            êµ¬ë§¤ëŒ€í–‰ ì‹ ì²­
                            <span id="agencyCount" class="group-count">0</span>
                        </div>
                        <div class="group-priority high">
                            <i data-lucide="alert-circle" style="width: 16px; height: 16px;"></i>
                            ìš°ì„  ì²˜ë¦¬ í•„ìš”
                        </div>
                    </div>
                    <div id="agencyRequests" class="requests-grid">
                        <!-- êµ¬ë§¤ëŒ€í–‰ ì‹ ì²­ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <!-- ğŸ”µ ì§ì ‘êµ¬ë§¤ ì‹ ì²­ ê·¸ë£¹ -->
                <div id="directGroup" class="request-group" style="display: none;">
                    <div class="group-header">
                        <div class="group-title">
                            <i data-lucide="credit-card" class="group-icon"></i>
                            ì§ì ‘êµ¬ë§¤ ì‹ ì²­
                            <span id="directCount" class="group-count">0</span>
                        </div>
                        <div class="group-priority normal">
                            <i data-lucide="check-circle" style="width: 16px; height: 16px;"></i>
                            ì¼ë°˜ ì²˜ë¦¬
                        </div>
                    </div>
                    <div id="directRequests" class="requests-grid">
                        <!-- ì§ì ‘êµ¬ë§¤ ì‹ ì²­ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ -->
                <div id="emptyState" class="no-results" style="display: none;">
                    <i data-lucide="inbox" style="width: 48px; height: 48px; margin: 0 auto 1rem; color: #a0aec0;"></i>
                    <h3>ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                    <p>í˜„ì¬ ì¡°ê±´ì— ë§ëŠ” í•­ê³µê¶Œ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸªŸ ëª¨ë‹¬ ì‹œìŠ¤í…œ (Phase 3ì—ì„œ ë™ì  ìƒì„± ì˜ˆì •, ê¸°ë³¸ êµ¬ì¡°ë§Œ) -->
    <div id="modalContainer">
        <!-- ëª¨ë‹¬ë“¤ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
    </div>

    <!-- ğŸ”„ ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>ì²˜ë¦¬ ì¤‘...</p>
        </div>
    </div>

    <!-- ğŸ”§ v10.0.0 JavaScript Files (Phase 2 UI ê°œë°œ) -->
    <!-- 1. ê¸°ë³¸ ì„¤ì • ëª¨ë“ˆ -->
    <script src="../js/config.js?v=10.0.0"></script>
    <script src="../js/utils.js?v=10.0.0"></script>
    
    <!-- 2. Supabase ëª¨ë“ˆë“¤ (ì˜ì¡´ì„± ìˆœì„œ ì¤‘ìš”!) -->
    <script src="../js/supabase/supabase-core.js?v=10.0.0"></script>
    <script src="../js/supabase/supabase-admin.js?v=10.0.0"></script>
    
    <!-- 3. ê³µí†µ ëª¨ë“ˆë“¤ -->
    <script src="../js/common/storage-utils.js?v=10.0.0"></script>
    
    <!-- 4. ğŸ†• v10.0.0 Phase 1 ì™„ë£Œ ëª¨ë“ˆë“¤ -->
    <script src="../js/admin/flight-management-core.js?v=10.0.0"></script>
    <script src="../js/admin/flight-management-api.js?v=10.0.0"></script>
    
    <!-- 5. ğŸ¨ Phase 2 UI ëª¨ë“ˆë“¤ (ê°œë°œ ì™„ë£Œ) -->
    <script src="../js/admin/flight-management-cards.js?v=10.0.0"></script>
    <script src="../js/admin/flight-management-statistics.js?v=10.0.0"></script>
    <script src="../js/admin/flight-management-controls.js?v=10.0.0"></script>
    <script src="../js/admin/flight-management-ui.js?v=10.0.0"></script>
    
    <!-- 6. ğŸªŸ Phase 3 ëª¨ë‹¬ ëª¨ë“ˆë“¤ (ê°œë°œ ì™„ë£Œ) -->
    <script src="../js/admin/flight-management-modals.js?v=10.0.0"></script>

    <!-- ğŸš€ ë©”ì¸ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ v10.0.0 -->
    <script>
        console.log('ğŸš€ í•­ê³µê¶Œ ê´€ë¦¬ í˜ì´ì§€ v10.0.0 ì´ˆê¸°í™” ì‹œì‘ (Phase 2 UI ê°œë°œ ì™„ë£Œ)...');

        // ğŸŒ ì „ì—­ ìƒíƒœ ê´€ë¦¬
        window.FlightManagementPage = {
            version: '10.0.0',
            phase: 'Phase 2 - UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ ì™„ë£Œ',
            system: null,
            isInitialized: false,
            selectedRequests: new Set(),
            realTimeEnabled: true,
            retryCount: 0,
            maxRetries: 3
        };

        // ğŸ” ì¸ì¦ ì²´í¬ ë° ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸ“„ DOM ë¡œë“œ ì™„ë£Œ - v10.0.0 Phase 2 UI ê°œë°œ ì™„ë£Œ');
            
            try {
                // Lucide ì•„ì´ì½˜ ì´ˆê¸°í™”
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }

                // ê´€ë¦¬ì ì¸ì¦ í™•ì¸
                if (!checkAdminAuthentication()) {
                    return;
                }
                
                // í•­ê³µê¶Œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
                await initializeFlightManagementSystem();
                
            } catch (error) {
                console.error('âŒ í˜ì´ì§€ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showErrorState('í˜ì´ì§€ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        });

        // ğŸ” ê´€ë¦¬ì ì¸ì¦ í™•ì¸
        function checkAdminAuthentication() {
            console.log('ğŸ” ê´€ë¦¬ì ì¸ì¦ í™•ì¸ ì¤‘...');

            const adminSession = localStorage.getItem('adminSession');
            if (!adminSession) {
                console.warn('âš ï¸ ê´€ë¦¬ì ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤');
                alert('ê´€ë¦¬ì ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '../admin.html';
                return false;
            }

            console.log('âœ… ê´€ë¦¬ì ì¸ì¦ í™•ì¸ë¨');
            return true;
        }

        // ğŸš€ FlightManagementSystem ì´ˆê¸°í™”
        async function initializeFlightManagementSystem() {
            console.log('ğŸš€ FlightManagementSystem v10.0.0 ì´ˆê¸°í™” ì¤‘... (Phase 2 ì™„ë£Œ)');
            
            try {
                showLoadingState();

                // FlightManagementSystem í´ë˜ìŠ¤ ëŒ€ê¸°
                await waitForFlightManagementSystem();

                // ì‹œìŠ¤í…œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                window.FlightManagementPage.system = new window.FlightManagementSystem();

                // ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ ëŒ€ê¸°
                await waitForSystemInitialization();

                // UI ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
                setupUIEventListeners();

                // ì„±ê³µì‹œ ë©”ì¸ ì½˜í…ì¸  í‘œì‹œ
                showMainContent();
                window.FlightManagementPage.isInitialized = true;
                
                console.log('âœ… FlightManagementSystem v10.0.0 ì´ˆê¸°í™” ì™„ë£Œ! (Phase 2 ì™„ë£Œ)');

                // ì´ˆê¸°í™” ì™„ë£Œ ì•Œë¦¼ (3ì´ˆ í›„ ìë™ ì‚¬ë¼ì§)
                setTimeout(() => {
                    showRealTimeUpdate('ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
                }, 1000);

            } catch (error) {
                console.error('âŒ FlightManagementSystem ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                showErrorState('ì‹œìŠ¤í…œ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
                throw error;
            }
        }

        // FlightManagementSystem í´ë˜ìŠ¤ ëŒ€ê¸°
        async function waitForFlightManagementSystem() {
            console.log('â³ FlightManagementSystem í´ë˜ìŠ¤ ëŒ€ê¸° ì¤‘...');
            
            let attempts = 0;
            const maxAttempts = 100; // 10ì´ˆ

            while (attempts < maxAttempts) {
                if (window.FlightManagementSystem) {
                    console.log('âœ… FlightManagementSystem í´ë˜ìŠ¤ ì¤€ë¹„ë¨');
                    return;
                }

                await new Promise(resolve => setTimeout(resolve, 100));
                attempts++;

                if (attempts % 20 === 0) {
                    console.log(`â³ FlightManagementSystem ëŒ€ê¸° ì¤‘... ${attempts}/${maxAttempts}`);
                }
            }

            throw new Error('FlightManagementSystem í´ë˜ìŠ¤ ë¡œë“œ íƒ€ì„ì•„ì›ƒ');
        }

        // ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ ëŒ€ê¸°
        async function waitForSystemInitialization() {
            console.log('â³ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ ëŒ€ê¸° ì¤‘...');
            
            let attempts = 0;
            const maxAttempts = 200; // 20ì´ˆ

            while (attempts < maxAttempts) {
                if (window.FlightManagementPage.system && 
                    window.FlightManagementPage.system.state.isInitialized) {
                    console.log('âœ… ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ í™•ì¸ë¨');
                    return;
                }

                await new Promise(resolve => setTimeout(resolve, 100));
                attempts++;

                if (attempts % 30 === 0) {
                    console.log(`â³ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ëŒ€ê¸° ì¤‘... ${attempts}/${maxAttempts}`);
                }
            }

            throw new Error('ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ íƒ€ì„ì•„ì›ƒ');
        }

        // ğŸ® UI ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupUIEventListeners() {
            console.log('ğŸ® UI ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì¤‘...');

            // ì‹¤ì‹œê°„ ë™ê¸°í™” í† ê¸€
            const realTimeToggle = document.getElementById('realTimeToggle');
            if (realTimeToggle) {
                realTimeToggle.addEventListener('click', toggleRealTimeSync);
            }

            // Excel ë‚´ë³´ë‚´ê¸°
            const exportBtn = document.getElementById('exportBtn');
            if (exportBtn) {
                exportBtn.addEventListener('click', handleExportData);
            }

            // ì¼ê´„ ì²˜ë¦¬ ë²„íŠ¼ë“¤
            const bulkApprove = document.getElementById('bulkApprove');
            const bulkReject = document.getElementById('bulkReject');
            if (bulkApprove) bulkApprove.addEventListener('click', handleBulkApprove);
            if (bulkReject) bulkReject.addEventListener('click', handleBulkReject);

            // ì„ íƒ ê´€ë¦¬ ë²„íŠ¼ë“¤
            const selectAllBtn = document.getElementById('selectAllBtn');
            const clearSelectionBtn = document.getElementById('clearSelectionBtn');
            if (selectAllBtn) selectAllBtn.addEventListener('click', handleSelectAll);
            if (clearSelectionBtn) clearSelectionBtn.addEventListener('click', handleClearSelection);

            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
            document.addEventListener('keydown', handleKeyboardShortcuts);

            // ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            if (window.FlightManagementPage.system) {
                // ë°ì´í„° ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸
                window.FlightManagementPage.system.on('data:refreshed', (data) => {
                    if (data.hasChanges) {
                        showRealTimeUpdate('ë°ì´í„° ì—…ë°ì´íŠ¸ë¨');
                    }
                });

                // ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì´ë²¤íŠ¸
                window.FlightManagementPage.system.on('system:initialized', () => {
                    console.log('ğŸ‰ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì´ë²¤íŠ¸ ìˆ˜ì‹ ');
                });
            }

            console.log('âœ… UI ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
        }

        // ğŸ”„ ì‹¤ì‹œê°„ ë™ê¸°í™” í† ê¸€
        function toggleRealTimeSync() {
            if (!window.FlightManagementPage.system) return;

            const realTimeToggle = document.getElementById('realTimeToggle');
            const system = window.FlightManagementPage.system;

            if (system.state.isRealTimeEnabled) {
                system.stopRealTimeSync();
                window.FlightManagementPage.realTimeEnabled = false;
                realTimeToggle.innerHTML = '<i data-lucide="pause"></i>ì‹¤ì‹œê°„ ë™ê¸°í™”: êº¼ì§';
                realTimeToggle.classList.remove('primary');
                realTimeToggle.classList.add('secondary');
                showRealTimeUpdate('ì‹¤ì‹œê°„ ë™ê¸°í™” ë¹„í™œì„±í™”ë¨');
            } else {
                system.startRealTimeSync();
                window.FlightManagementPage.realTimeEnabled = true;
                realTimeToggle.innerHTML = '<i data-lucide="refresh-cw"></i>ì‹¤ì‹œê°„ ë™ê¸°í™”: ì¼œì§';
                realTimeToggle.classList.remove('secondary');
                realTimeToggle.classList.add('primary');
                showRealTimeUpdate('ì‹¤ì‹œê°„ ë™ê¸°í™” í™œì„±í™”ë¨');
            }

            // ì•„ì´ì½˜ ì¬ìƒì„±
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // ğŸ“¤ Excel ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        async function handleExportData() {
            console.log('ğŸ“¤ Excel ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹œì‘');
            
            try {
                if (!window.FlightManagementPage.system) {
                    throw new Error('ì‹œìŠ¤í…œì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
                }

                // í˜„ì¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const requests = window.FlightManagementPage.system.state.requestsData;
                
                if (!requests || requests.length === 0) {
                    alert('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                // CSV í˜•íƒœë¡œ ë°ì´í„° ë³€í™˜ (Excel ëŒ€ì‹  ê°„ë‹¨í•œ CSV)
                const csvData = convertToCSV(requests);
                downloadCSV(csvData, 'flight_requests_' + new Date().toISOString().split('T')[0] + '.csv');
                
                showRealTimeUpdate('ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì™„ë£Œ');

            } catch (error) {
                console.error('âŒ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨:', error);
                alert('ë°ì´í„° ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        // CSV ë³€í™˜ ìœ í‹¸ë¦¬í‹°
        function convertToCSV(requests) {
            const headers = [
                'ì‹ ì²­ì¼', 'ì‹ ì²­ì', 'íŒŒê²¬í•™ë‹¹', 'êµ¬ë§¤ë°©ì‹', 'ì¶œêµ­ì¼', 'ê·€êµ­ì¼', 
                'ì¶œë°œê³µí•­', 'ë„ì°©ê³µí•­', 'í•­ê³µë£Œ', 'í†µí™”', 'ìƒíƒœ', 'ë°˜ë ¤ì‚¬ìœ '
            ];

            const rows = requests.map(req => {
                const user = req.user_profiles;
                return [
                    new Date(req.created_at).toLocaleDateString('ko-KR'),
                    user.name || '',
                    user.sejong_institute || '',
                    req.purchase_type === 'direct' ? 'ì§ì ‘êµ¬ë§¤' : 'êµ¬ë§¤ëŒ€í–‰',
                    req.departure_date || '',
                    req.return_date || '',
                    req.departure_airport || '',
                    req.arrival_airport || '',
                    req.ticket_price || '',
                    req.currency || 'KRW',
                    getStatusText(req.status),
                    req.rejection_reason || ''
                ].map(cell => `"${String(cell).replace(/"/g, '""')}"`).join(',');
            });

            return [headers.join(','), ...rows].join('\n');
        }

        function downloadCSV(csvContent, filename) {
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // ì¼ê´„ ì²˜ë¦¬ í•¨ìˆ˜ë“¤
        function handleBulkApprove() {
            if (window.FlightManagementPage.selectedRequests.size === 0) {
                alert('ìŠ¹ì¸í•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // Phase 3ì—ì„œ ëª¨ë‹¬ë¡œ êµ¬í˜„ ì˜ˆì •
            console.log('ì¼ê´„ ìŠ¹ì¸:', Array.from(window.FlightManagementPage.selectedRequests));
            alert(`${window.FlightManagementPage.selectedRequests.size}ê°œ í•­ëª©ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Phase 3ì—ì„œ êµ¬í˜„ ì˜ˆì •)`);
        }

        function handleBulkReject() {
            if (window.FlightManagementPage.selectedRequests.size === 0) {
                alert('ë°˜ë ¤í•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // Phase 3ì—ì„œ ëª¨ë‹¬ë¡œ êµ¬í˜„ ì˜ˆì •
            console.log('ì¼ê´„ ë°˜ë ¤:', Array.from(window.FlightManagementPage.selectedRequests));
            alert(`${window.FlightManagementPage.selectedRequests.size}ê°œ í•­ëª©ì„ ë°˜ë ¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Phase 3ì—ì„œ êµ¬í˜„ ì˜ˆì •)`);
        }

        function handleSelectAll() {
            // Phase 2ì—ì„œ êµ¬í˜„ ì˜ˆì •
            console.log('ëª¨ë“  í•­ëª© ì„ íƒ (Phase 2ì—ì„œ êµ¬í˜„ ì˜ˆì •)');
        }

        function handleClearSelection() {
            window.FlightManagementPage.selectedRequests.clear();
            updateSelectionUI();
        }

        function updateSelectionUI() {
            const selectedCount = document.getElementById('selectedCount');
            const bulkApprove = document.getElementById('bulkApprove');
            const bulkReject = document.getElementById('bulkReject');
            
            const count = window.FlightManagementPage.selectedRequests.size;
            
            if (selectedCount) {
                selectedCount.textContent = `ì„ íƒëœ í•­ëª©: ${count}ê°œ`;
            }
            
            if (bulkApprove) {
                bulkApprove.disabled = count === 0;
            }
            
            if (bulkReject) {
                bulkReject.disabled = count === 0;
            }
        }

        // âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        function handleKeyboardShortcuts(e) {
            // Ctrl+D: ë””ë²„ê·¸ ì •ë³´
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                console.log('ğŸ› ï¸ í•­ê³µê¶Œ ê´€ë¦¬ í˜ì´ì§€ v10.0.0 ë””ë²„ê·¸ ì •ë³´ (Phase 2 ì™„ë£Œ)');
                console.log('ì‹œìŠ¤í…œ ìƒíƒœ:', window.FlightManagementPage.system?.getSystemInfo());
                console.log('í˜ì´ì§€ ìƒíƒœ:', {
                    version: window.FlightManagementPage.version,
                    phase: window.FlightManagementPage.phase,
                    isInitialized: window.FlightManagementPage.isInitialized,
                    selectedRequests: window.FlightManagementPage.selectedRequests.size,
                    realTimeEnabled: window.FlightManagementPage.realTimeEnabled
                });
            }

            // Ctrl+R: ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨
            if (e.ctrlKey && e.key === 'r' && e.shiftKey) {
                e.preventDefault();
                if (window.FlightManagementPage.system) {
                    window.FlightManagementPage.system.refreshData(true);
                    showRealTimeUpdate('ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ ì‹¤í–‰');
                }
            }

            // ESC: ì„ íƒ í•´ì œ
            if (e.key === 'Escape') {
                handleClearSelection();
            }
        }

        // ğŸ”„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ í‘œì‹œ
        function showRealTimeUpdate(message) {
            const indicator = document.getElementById('realTimeIndicator');
            if (!indicator) return;

            indicator.textContent = '';
            indicator.innerHTML = `
                <div class="pulse-dot"></div>
                <span>${message}</span>
            `;
            
            indicator.classList.add('show');
            
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 3000);
        }

        // ğŸ® ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
        function goBackToDashboard() {
            console.log('ğŸ”™ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°');
            
            // ì‹œìŠ¤í…œ ì •ë¦¬
            if (window.FlightManagementPage.system) {
                window.FlightManagementPage.system.destroy();
            }
            
            window.location.href = '../admin.html';
        }

        // ğŸ”„ ë°ì´í„° ì¬ì‹œë„
        function retryDataLoad() {
            window.FlightManagementPage.retryCount++;
            
            if (window.FlightManagementPage.retryCount <= window.FlightManagementPage.maxRetries) {
                console.log(`ğŸ”„ ë°ì´í„° ì¬ì‹œë„ ${window.FlightManagementPage.retryCount}/${window.FlightManagementPage.maxRetries}`);
                initializeFlightManagementSystem();
            } else {
                alert('ì—¬ëŸ¬ ë²ˆ ì‹œë„í–ˆì§€ë§Œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
            }
        }

        // ğŸ¨ UI ìƒíƒœ ê´€ë¦¬ í•¨ìˆ˜ë“¤
        function showLoadingState() {
            document.getElementById('loadingState').style.display = 'block';
            document.getElementById('errorState').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
        }

        function showErrorState(message = '') {
            document.getElementById('loadingState').style.display = 'none';
            document.getElementById('errorState').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
            
            if (message) {
                const errorElement = document.querySelector('#errorState p');
                if (errorElement) {
                    errorElement.textContent = message;
                }
            }
        }

        function showMainContent() {
            document.getElementById('loadingState').style.display = 'none';
            document.getElementById('errorState').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        // ğŸ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getStatusText(status) {
            const statusMap = {
                'pending': 'ëŒ€ê¸°ì¤‘',
                'approved': 'ìŠ¹ì¸ë¨',
                'rejected': 'ë°˜ë ¤ë¨',
                'completed': 'ì™„ë£Œ'
            };
            return statusMap[status] || status;
        }

        function formatPrice(price, currency = 'KRW') {
            if (!price) return '-';
            if (currency === 'KRW') {
                return new Intl.NumberFormat('ko-KR').format(price) + 'ì›';
            }
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: currency
            }).format(price);
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            return new Date(dateString).toLocaleDateString('ko-KR', {
                month: '2-digit',
                day: '2-digit'
            });
        }

        // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ (ë””ë²„ê¹… ë° í™•ì¥ìš©)
        window.FlightManagementPageUtils = {
            showLoadingState,
            showErrorState,
            showMainContent,
            showRealTimeUpdate,
            retryDataLoad,
            toggleRealTimeSync,
            handleExportData,
            updateSelectionUI,
            getSystemInfo: () => window.FlightManagementPage
        };

        console.log('âœ… í•­ê³µê¶Œ ê´€ë¦¬ í˜ì´ì§€ v10.0.0 ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ (Phase 2 ì™„ë£Œ)');
    </script>

    <!-- Lucide Icons ì¬ì´ˆê¸°í™” -->
    <script>
        // DOM ë³€ê²½ í›„ ì•„ì´ì½˜ ì¬ìƒì„±ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹°
        window.refreshIcons = function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        };

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì•„ì´ì½˜ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            setTimeout(() => {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, 500);
        });
    </script>
</body>
</html>
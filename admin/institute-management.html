<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒŒê²¬ í•™ë‹¹ ì •ë³´ ê´€ë¦¬ - ì„¸ì¢…í•™ë‹¹ ë¬¸í™”ì¸í„´ ì§€ì› ì‹œìŠ¤í…œ</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../css/main.css?v=4.3.2">
    <link rel="stylesheet" href="../css/admin.css?v=4.3.2">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Supabase JavaScript Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <style>
        .institute-management-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #f7fafc 0%, #e2e8f0 100%);
            padding: 2rem;
        }

        .management-header {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-title h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 0.5rem 0;
        }

        .header-title p {
            color: #718096;
            margin: 0;
        }

        .back-btn {
            background: #e2e8f0;
            color: #4a5568;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: #cbd5e0;
        }

        /* í†µê³„ ì„¹ì…˜ */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-card .stat-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .stat-card.total .stat-icon {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .stat-card.assigned .stat-icon {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .stat-card.pending .stat-icon {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            color: white;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0;
        }

        .stat-label {
            color: #718096;
            font-size: 0.9rem;
            margin: 0;
        }

        /* í•„í„° ë° ê²€ìƒ‰ ì„¹ì…˜ */
        .filters-section {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            align-items: center;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            transition: border-color 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #a0aec0;
            width: 1rem;
            height: 1rem;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* í•™ë‹¹ ì¹´ë“œ ê·¸ë¦¬ë“œ */
        .institutes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .institute-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .institute-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .institute-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .institute-header {
            margin-bottom: 1rem;
        }

        .institute-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 0.5rem 0;
            line-height: 1.4;
        }

        .institute-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: #e6fffa;
            color: #00695c;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 1rem;
            text-transform: uppercase;
        }

        .institute-status.incomplete {
            background: #fff3cd;
            color: #856404;
        }

        .institute-body {
            margin-bottom: 1.5rem;
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .info-icon {
            width: 1rem;
            height: 1rem;
            color: #718096;
            flex-shrink: 0;
        }

        .info-text {
            color: #4a5568;
        }

        .info-text.placeholder {
            color: #a0aec0;
            font-style: italic;
        }

        .intern-list {
            margin: 0.5rem 0;
        }

        .intern-item {
            display: inline-block;
            background: #f7fafc;
            padding: 0.25rem 0.5rem;
            margin: 0.25rem 0.25rem 0.25rem 0;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }

        .intern-name {
            font-weight: 600;
        }

        .intern-field {
            color: #718096;
        }

        .institute-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .last-updated {
            font-size: 0.8rem;
            color: #a0aec0;
        }

        .update-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .update-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* ë¡œë”© ìƒíƒœ */
        .loading-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .loading-spinner {
            width: 2rem;
            height: 2rem;
            border: 3px solid #e2e8f0;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .institute-management-container {
                padding: 1rem;
            }

            .management-header {
                padding: 1.5rem;
            }

            .header-content {
                flex-direction: column;
                align-items: stretch;
            }

            .institutes-grid {
                grid-template-columns: 1fr;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .stats-section {
                grid-template-columns: 1fr;
            }

            .institute-footer {
                flex-direction: column;
                align-items: stretch;
                gap: 0.75rem;
            }
        }

        @media (max-width: 480px) {
            .institute-card {
                padding: 1rem;
            }

            .institute-name {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="institute-management-container">
        <!-- í—¤ë” ì„¹ì…˜ -->
        <div class="management-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>íŒŒê²¬ í•™ë‹¹ ì •ë³´ ê´€ë¦¬</h1>
                    <p>42ê°œ ì„¸ì¢…í•™ë‹¹ì˜ ì •ë³´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ë¬¸í™”ì¸í„´ ë°°ì • í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <button class="back-btn" onclick="goBackToDashboard()">
                    <i data-lucide="arrow-left"></i>
                    ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                </button>
            </div>
        </div>

        <!-- í†µê³„ ì„¹ì…˜ -->
        <div class="stats-section">
            <div class="stat-card total">
                <div class="stat-icon">
                    <i data-lucide="building"></i>
                </div>
                <div class="stat-number" id="totalInstitutes">-</div>
                <p class="stat-label">ì´ ì„¸ì¢…í•™ë‹¹ ìˆ˜</p>
            </div>
            <div class="stat-card assigned">
                <div class="stat-icon">
                    <i data-lucide="users"></i>
                </div>
                <div class="stat-number" id="assignedInterns">-</div>
                <p class="stat-label">ë°°ì •ëœ ë¬¸í™”ì¸í„´</p>
            </div>
            <div class="stat-card pending">
                <div class="stat-icon">
                    <i data-lucide="alert-circle"></i>
                </div>
                <div class="stat-number" id="incompleteInfo">-</div>
                <p class="stat-label">ì •ë³´ ë¯¸ì™„ì„± í•™ë‹¹</p>
            </div>
        </div>

        <!-- í•„í„° ë° ê²€ìƒ‰ ì„¹ì…˜ -->
        <div class="filters-section">
            <div class="filters-grid">
                <div class="search-box">
                    <i data-lucide="search" class="search-icon"></i>
                    <input type="text" class="search-input" placeholder="í•™ë‹¹ëª… ë˜ëŠ” ë¬¸í™”ì¸í„´ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰..." id="searchInput">
                </div>
                <button class="refresh-btn" onclick="loadInstitutes()">
                    <i data-lucide="refresh-cw"></i>
                    ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
        </div>

        <!-- í•™ë‹¹ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
        <div id="institutesContainer">
            <!-- ë¡œë”© ìƒíƒœ -->
            <div class="loading-container" id="loadingContainer">
                <div class="loading-spinner"></div>
                <span>í•™ë‹¹ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
            </div>
        </div>

        <!-- í•™ë‹¹ ì¹´ë“œê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë  ìœ„ì¹˜ -->
        <div class="institutes-grid" id="institutesGrid" style="display: none;">
            <!-- ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <!-- JavaScript Files -->
    <!-- 1. ê¸°ë³¸ ì„¤ì • ëª¨ë“ˆ -->
    <script src="../js/config.js?v=4.3.2"></script>
    <script src="../js/auth.js?v=4.3.2"></script>
    <script src="../js/utils.js?v=4.3.2"></script>
    
    <!-- 2. Supabase ëª¨ë“ˆë“¤ (ì˜ì¡´ì„± ìˆœì„œ ì¤‘ìš”!) -->
    <script src="../js/supabase/supabase-core.js?v=4.3.2"></script>
    <script src="../js/supabase/supabase-student.js?v=4.3.2"></script>
    <script src="../js/supabase/supabase-admin.js?v=4.3.2"></script>
    <script src="../js/supabase-client.js?v=4.3.2"></script>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let allInstitutes = [];
        let filteredInstitutes = [];

        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ›ï¸ í•™ë‹¹ ê´€ë¦¬ í˜ì´ì§€ ì´ˆê¸°í™” (Aë‹¨ê³„ - ì¹´ë“œ ë ˆì´ì•„ì›ƒ)');
            
            // Lucide ì•„ì´ì½˜ ì´ˆê¸°í™”
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // ê´€ë¦¬ì ì¸ì¦ í™•ì¸
            checkAdminAuthentication();

            // í•™ë‹¹ ë°ì´í„° ë¡œë“œ
            loadInstitutes();

            // ê²€ìƒ‰ ê¸°ëŠ¥ ì„¤ì •
            setupSearch();
        });

        function checkAdminAuthentication() {
            console.log('ğŸ” ê´€ë¦¬ì ì¸ì¦ í™•ì¸ ì¤‘...');
            
            const adminSession = localStorage.getItem('adminSession');
            if (!adminSession) {
                console.warn('âš ï¸ ê´€ë¦¬ì ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤');
                alert('ê´€ë¦¬ì ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '../admin.html';
                return;
            }

            console.log('âœ… ê´€ë¦¬ì ì¸ì¦ í™•ì¸ë¨');
        }

        async function loadInstitutes() {
            console.log('ğŸ“‹ í•™ë‹¹ ì •ë³´ ë¡œë“œ ì‹œì‘...');
            
            try {
                showLoading();

                // Supabaseê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°
                await waitForSupabase();

                // í•™ë‹¹ ì •ë³´ì™€ ë¬¸í™”ì¸í„´ ì •ë³´ë¥¼ í•¨ê»˜ ì¡°íšŒ
                const { data: institutes, error: institutesError } = await SupabaseAPI.client
                    .from('institutes')
                    .select('*')
                    .order('name_ko');

                if (institutesError) {
                    throw institutesError;
                }

                const { data: interns, error: internsError } = await SupabaseAPI.client
                    .from('user_profiles')
                    .select('name, field, sejong_institute')
                    .eq('user_type', 'student')
                    .not('sejong_institute', 'is', null);

                if (internsError) {
                    throw internsError;
                }

                // í•™ë‹¹ë³„ ë¬¸í™”ì¸í„´ ì •ë³´ ê·¸ë£¹í™”
                const internsByInstitute = {};
                interns.forEach(intern => {
                    if (!internsByInstitute[intern.sejong_institute]) {
                        internsByInstitute[intern.sejong_institute] = [];
                    }
                    internsByInstitute[intern.sejong_institute].push(intern);
                });

                // í•™ë‹¹ ì •ë³´ì— ë¬¸í™”ì¸í„´ ì •ë³´ ì—°ê²°
                allInstitutes = institutes.map(institute => ({
                    ...institute,
                    interns: internsByInstitute[institute.name_ko] || []
                }));

                filteredInstitutes = [...allInstitutes];

                console.log(`ğŸ“Š ì´ ${allInstitutes.length}ê°œ í•™ë‹¹ ë¡œë“œ ì™„ë£Œ`);

                hideLoading();
                renderInstitutes();
                updateStats();

            } catch (error) {
                console.error('âŒ í•™ë‹¹ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                hideLoading();
                showError('í•™ë‹¹ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        async function waitForSupabase() {
            let attempts = 0;
            while (!window.SupabaseAPI && attempts < 50) {
                await new Promise(resolve => setTimeout(resolve, 100));
                attempts++;
            }
            
            if (!window.SupabaseAPI) {
                throw new Error('Supabase ì´ˆê¸°í™” ì‹¤íŒ¨');
            }
        }

        function renderInstitutes() {
            const container = document.getElementById('institutesGrid');
            container.innerHTML = '';

            if (filteredInstitutes.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #718096;">
                        <i data-lucide="search" style="width: 3rem; height: 3rem; margin-bottom: 1rem;"></i>
                        <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                lucide.createIcons();
                return;
            }

            filteredInstitutes.forEach(institute => {
                const card = createInstituteCard(institute);
                container.appendChild(card);
            });

            container.style.display = 'grid';
            lucide.createIcons();
        }

        function createInstituteCard(institute) {
            const div = document.createElement('div');
            div.className = 'institute-card';

            const isComplete = checkInstituteCompleteness(institute);
            const internsList = institute.interns.map(intern => 
                `<span class="intern-item"><span class="intern-name">${intern.name}</span> <span class="intern-field">(${intern.field})</span></span>`
            ).join('');

            const contactPerson = institute.contact_person || 'ë¯¸ì •';
            const lastUpdated = institute.updated_at ? 
                new Date(institute.updated_at).toLocaleDateString('ko-KR') : 'ì •ë³´ ì—†ìŒ';

            div.innerHTML = `
                <div class="institute-header">
                    <h3 class="institute-name">${institute.name_ko}</h3>
                    <span class="institute-status ${isComplete ? '' : 'incomplete'}">
                        ${isComplete ? 'ì™„ë£Œ' : 'ë¯¸ì™„ì„±'}
                    </span>
                </div>
                
                <div class="institute-body">
                    <div class="info-row">
                        <i data-lucide="users" class="info-icon"></i>
                        <span class="info-text">
                            ${institute.interns.length > 0 ? 
                                `ë¬¸í™”ì¸í„´ ${institute.interns.length}ëª…` : 
                                '<span class="placeholder">ë°°ì •ëœ ë¬¸í™”ì¸í„´ ì—†ìŒ</span>'
                            }
                        </span>
                    </div>
                    
                    ${institute.interns.length > 0 ? `
                        <div class="intern-list">
                            ${internsList}
                        </div>
                    ` : ''}
                    
                    <div class="info-row">
                        <i data-lucide="user" class="info-icon"></i>
                        <span class="info-text ${contactPerson === 'ë¯¸ì •' ? 'placeholder' : ''}">
                            ë‹´ë‹¹ì: ${contactPerson}
                        </span>
                    </div>
                    
                    <div class="info-row">
                        <i data-lucide="map-pin" class="info-icon"></i>
                        <span class="info-text ${!institute.address ? 'placeholder' : ''}">
                            ${institute.address || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}
                        </span>
                    </div>
                </div>
                
                <div class="institute-footer">
                    <span class="last-updated">ìµœì¢… ìˆ˜ì •: ${lastUpdated}</span>
                    <button class="update-btn" onclick="openUpdateModal('${institute.id}')">
                        <i data-lucide="edit"></i>
                        ì—…ë°ì´íŠ¸
                    </button>
                </div>
            `;

            return div;
        }

        function checkInstituteCompleteness(institute) {
            const requiredFields = [
                'name_en', 'operator', 'address', 'contact_person', 
                'phone', 'contact_phone'
            ];
            
            return requiredFields.every(field => 
                institute[field] && institute[field].trim() !== ''
            );
        }

        function updateStats() {
            const totalCount = allInstitutes.length;
            const assignedCount = allInstitutes.reduce((sum, inst) => sum + inst.interns.length, 0);
            const incompleteCount = allInstitutes.filter(inst => !checkInstituteCompleteness(inst)).length;

            document.getElementById('totalInstitutes').textContent = totalCount;
            document.getElementById('assignedInterns').textContent = assignedCount;
            document.getElementById('incompleteInfo').textContent = incompleteCount;
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase().trim();
                
                if (query === '') {
                    filteredInstitutes = [...allInstitutes];
                } else {
                    filteredInstitutes = allInstitutes.filter(institute => {
                        const instituteName = institute.name_ko.toLowerCase();
                        const internNames = institute.interns.map(intern => 
                            intern.name.toLowerCase()
                        ).join(' ');
                        
                        return instituteName.includes(query) || internNames.includes(query);
                    });
                }
                
                renderInstitutes();
            });
        }

        function openUpdateModal(instituteId) {
            // Bë‹¨ê³„ì—ì„œ êµ¬í˜„ë  ëª¨ë‹¬ ê¸°ëŠ¥
            console.log('ğŸ”„ ì—…ë°ì´íŠ¸ ëª¨ë‹¬ ì—´ê¸°:', instituteId);
            alert('ì—…ë°ì´íŠ¸ ëª¨ë‹¬ ê¸°ëŠ¥ì€ Bë‹¨ê³„ì—ì„œ êµ¬í˜„ë  ì˜ˆì •ì…ë‹ˆë‹¤.\n\në‹¤ìŒ ë‹¨ê³„ë¥¼ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!');
        }

        function showLoading() {
            document.getElementById('loadingContainer').style.display = 'flex';
            document.getElementById('institutesGrid').style.display = 'none';
        }

        function hideLoading() {
            document.getElementById('loadingContainer').style.display = 'none';
            document.getElementById('institutesGrid').style.display = 'grid';
        }

        function showError(message) {
            const container = document.getElementById('institutesContainer');
            container.innerHTML = `
                <div style="background: white; border-radius: 1rem; padding: 3rem; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <i data-lucide="alert-circle" style="width: 3rem; height: 3rem; color: #e53e3e; margin-bottom: 1rem;"></i>
                    <h3 style="color: #2d3748; margin-bottom: 0.5rem;">ì˜¤ë¥˜ ë°œìƒ</h3>
                    <p style="color: #718096; margin-bottom: 1.5rem;">${message}</p>
                    <button class="refresh-btn" onclick="loadInstitutes()">
                        <i data-lucide="refresh-cw"></i>
                        ë‹¤ì‹œ ì‹œë„
                    </button>
                </div>
            `;
            lucide.createIcons();
        }

        function goBackToDashboard() {
            console.log('ğŸ”™ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°');
            window.location.href = '../admin.html';
        }

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ê°œë°œììš©)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                console.log('ğŸ› ï¸ Aë‹¨ê³„ ë””ë²„ê·¸ ì •ë³´');
                console.log('ì „ì²´ í•™ë‹¹:', allInstitutes.length);
                console.log('í•„í„°ëœ í•™ë‹¹:', filteredInstitutes.length);
                console.log('ëª¨ë“ˆ ìƒíƒœ:', {
                    SupabaseCore: !!window.SupabaseCore,
                    SupabaseAPI: !!window.SupabaseAPI
                });
            }
        });

        console.log('ğŸ›ï¸ Aë‹¨ê³„: í•™ë‹¹ ì¹´ë“œ ë ˆì´ì•„ì›ƒ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¸ì¢…í•™ë‹¹ ë¬¸í™”ì¸í„´ ì§€ì› ì‹œìŠ¤í…œ - ê´€ë¦¬ì</title>
    
    <!-- CSS Files - Cache Busting Added -->
    <link rel="stylesheet" href="css/main.css?v=1.3.0">
    <link rel="stylesheet" href="css/login.css?v=1.3.0">
    <link rel="stylesheet" href="css/admin.css?v=1.3.0">
    <link rel="stylesheet" href="css/lesson-plan.css?v=1.3.0">
    
    <!-- í•™ë‹¹ ê´€ë¦¬ ì „ìš© ìŠ¤íƒ€ì¼ -->
    <style>
        /* í•™ë‹¹ ê´€ë¦¬ ì „ìš© CSS */
        .institute-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .institute-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .institute-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .institute-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .institute-basic-info h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #2d3748;
            margin: 0 0 0.25rem 0;
        }

        .institute-name-en {
            font-size: 0.9rem;
            color: #718096;
            margin: 0 0 0.5rem 0;
        }

        .institute-location {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            color: #4a5568;
            margin: 0;
        }

        .institute-location i {
            width: 1rem;
            height: 1rem;
        }

        .institute-status {
            text-align: right;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .status-badge.active {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-badge.inactive {
            background: #fed7d7;
            color: #c53030;
        }

        .program-count {
            font-size: 0.75rem;
            color: #718096;
        }

        .institute-card-body {
            margin-bottom: 1rem;
        }

        .institute-details .detail-item {
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            line-height: 1.4;
        }

        .institute-details .detail-item strong {
            color: #4a5568;
            font-weight: 600;
        }

        .institute-card-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .institute-card-actions .btn.small {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            flex: 1;
            min-width: auto;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-content.large {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .form-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .form-section h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 0.5rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            width: auto;
        }

        /* ìƒì„¸ ì •ë³´ ëª¨ë‹¬ */
        .detail-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .detail-section:last-child {
            border-bottom: none;
        }

        .detail-section h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .detail-item {
            margin-bottom: 0.75rem;
        }

        .detail-item.full-width {
            grid-column: 1 / -1;
        }

        .detail-item label {
            display: block;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 0.25rem;
        }

        .detail-item span {
            color: #2d3748;
            line-height: 1.5;
        }

        .detail-item a {
            color: #667eea;
            text-decoration: none;
        }

        .detail-item a:hover {
            text-decoration: underline;
        }

        .programs-list .program-item {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .programs-list .program-item h4 {
            margin: 0 0 0.5rem 0;
            color: #2d3748;
            font-size: 1rem;
        }

        .programs-list .program-item p {
            margin: 0.25rem 0;
            font-size: 0.875rem;
            color: #4a5568;
        }

        .programs-list .no-programs {
            text-align: center;
            color: #718096;
            font-style: italic;
            padding: 2rem;
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: #718096;
        }

        .empty-state i {
            width: 3rem;
            height: 3rem;
            margin-bottom: 1rem;
            color: #cbd5e0;
        }

        .empty-state h3 {
            margin: 0 0 0.5rem 0;
            color: #4a5568;
        }

        .empty-state p {
            margin: 0 0 1.5rem 0;
        }

        .error-state {
            text-align: center;
            padding: 3rem 2rem;
            color: #e53e3e;
        }

        .error-state i {
            width: 3rem;
            height: 3rem;
            margin-bottom: 1rem;
            color: #fc8181;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .institute-list {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .detail-grid {
                grid-template-columns: 1fr;
            }

            .institute-card-actions {
                flex-direction: column;
            }

            .institute-card-actions .btn.small {
                flex: none;
            }
        }
    </style>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Supabase JavaScript Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Main App Container -->
    <div id="app">
        <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ í˜ì´ì§€ -->
        <div id="loginPage" class="page active">
            <div class="login-container">
                <div class="login-card">
                    <div class="login-header">
                        <h1>ì„¸ì¢…í•™ë‹¹ ë¬¸í™”ì¸í„´ ì§€ì› ì‹œìŠ¤í…œ</h1>
                        <p>Cultural Intern Support System - Administrator</p>
                        <div class="admin-badge">
                            <i data-lucide="shield-check"></i>
                            ê´€ë¦¬ì ì „ìš©
                        </div>
                    </div>

                    <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ í¼ -->
                    <div id="adminLogin" class="login-form active">
                        <div class="form-group">
                            <label>ê´€ë¦¬ì ì½”ë“œ</label>
                            <input type="password" id="adminCode" placeholder="ê´€ë¦¬ì ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                        </div>
                        <button id="adminLoginBtn" class="login-btn admin">
                            <i data-lucide="log-in"></i>
                            ê´€ë¦¬ì ë¡œê·¸ì¸
                        </button>
                        
                        <div class="login-help">
                            <p><i data-lucide="info"></i> í•™ìƒìš© í˜ì´ì§€ëŠ” <a href="index.html">ì—¬ê¸°</a>ì—ì„œ ì ‘ì†í•˜ì„¸ìš”.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ -->
        <div id="adminPage" class="page">
            <header class="header">
                <div class="header-content">
                    <div class="admin-title">
                        <h1>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                        <p>ì„¸ì¢…í•™ë‹¹ ë¬¸í™”ì¸í„´ ì§€ì› ì‹œìŠ¤í…œ</p>
                    </div>
                    <div class="header-actions">
                        <button id="budgetSettingsBtn" class="btn secondary">
                            <i data-lucide="dollar-sign"></i>
                            ì˜ˆì‚° ì„¤ì •
                        </button>
                        <button id="lessonPlanManagementBtn" class="btn secondary">
                            <i data-lucide="clipboard-check"></i>
                            ìˆ˜ì—…ê³„íš ê´€ë¦¬
                        </button>
                        <button id="lessonPlanSettingsBtn" class="btn secondary">
                            <i data-lucide="settings"></i>
                            ìˆ˜ì—…ê³„íš ì„¤ì •
                        </button>
                        <button id="exportBtn" class="btn success">
                            <i data-lucide="download"></i>
                            Excel ë‚´ë³´ë‚´ê¸°
                        </button>
                        <button id="adminLogout" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </header>

            <main class="main-content">
                <!-- í•µì‹¬ ìš´ì˜ í†µê³„ ì¹´ë“œ -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <i data-lucide="users" class="stat-icon blue"></i>
                        <div class="stat-info">
                            <p class="stat-label">ì „ì²´ ì‹ ì²­ììˆ˜</p>
                            <p id="applicantCount" class="stat-value">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i data-lucide="clock" class="stat-icon orange"></i>
                        <div class="stat-info">
                            <p class="stat-label">ë¯¸ìŠ¹ì¸ ì•„ì´í…œ</p>
                            <p id="pendingCount" class="stat-value">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i data-lucide="check-circle" class="stat-icon green"></i>
                        <div class="stat-info">
                            <p class="stat-label">ìŠ¹ì¸ë¨ (êµ¬ë§¤ëŒ€ê¸°)</p>
                            <p id="approvedCount" class="stat-value">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i data-lucide="plane" class="stat-icon purple"></i>
                        <div class="stat-info">
                            <p class="stat-label">í•­ê³µê¶Œ ì‹ ì²­</p>
                            <p id="flightRequestCount" class="stat-value">0</p>
                        </div>
                    </div>
                </div>

                <!-- ì „ì²´ ì˜ˆì‚° í˜„í™© ì„¹ì…˜ -->
                <div class="budget-overview-section">
                    <h2>ğŸ’° ì „ì²´ ì˜ˆì‚° í˜„í™©</h2>
                    <div class="budget-summary-list">
                        <div class="budget-summary-item primary">
                            <span class="budget-label">ì „ì²´ ë°°ì • ì˜ˆì‚°</span>
                            <span id="totalApprovedBudget" class="budget-amount">0ì›</span>
                        </div>
                        <div class="budget-summary-item">
                            <span class="budget-label">ìŠ¹ì¸ëœ êµêµ¬ ì‹ ì²­ ì´ì•¡</span>
                            <span id="approvedItemsTotal" class="budget-amount">0ì›</span>
                        </div>
                        <div class="budget-summary-item">
                            <span class="budget-label">êµ¬ë§¤ ì™„ë£Œ ì´ì•¡</span>
                            <span id="purchasedTotal" class="budget-amount">0ì›</span>
                        </div>
                        <div class="budget-summary-item">
                            <span class="budget-label">1ì¸ë‹¹ í‰ê·  ì§€ì›ê¸ˆ</span>
                            <span id="averagePerPerson" class="budget-amount">0ì›</span>
                        </div>
                    </div>
                </div>

                <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
                <div class="admin-tabs">
                    <button id="equipmentTab" class="admin-tab-btn active">
                        <i data-lucide="package"></i>
                        êµêµ¬ ì‹ ì²­ ê´€ë¦¬
                    </button>
                    <button id="flightTab" class="admin-tab-btn">
                        <i data-lucide="plane"></i>
                        í•­ê³µê¶Œ ì‹ ì²­ ê´€ë¦¬
                    </button>
                    <button id="instituteTab" class="admin-tab-btn">
                        <i data-lucide="building"></i>
                        í•™ë‹¹ ê´€ë¦¬
                    </button>
                </div>

                <!-- ê²€ìƒ‰ -->
                <div class="search-container">
                    <div class="search-box">
                        <i data-lucide="search" class="search-icon"></i>
                        <input type="text" id="searchInput" placeholder="í•™ìƒ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰...">
                    </div>
                </div>

                <!-- êµêµ¬ ì‹ ì²­ ëª©ë¡ -->
                <div id="equipmentRequests" class="admin-tab-content active">
                    <div id="adminApplications" class="admin-applications">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ê´€ë¦¬ììš© êµêµ¬ ì‹ ì²­ ëª©ë¡ -->
                    </div>
                </div>

                <!-- í•­ê³µê¶Œ ì‹ ì²­ ëª©ë¡ -->
                <div id="flightRequests" class="admin-tab-content">
                    <div id="adminFlightApplications" class="admin-applications">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  í•­ê³µê¶Œ ì‹ ì²­ ëª©ë¡ -->
                    </div>
                </div>

                <!-- í•™ë‹¹ ê´€ë¦¬ -->
                <div id="instituteManagement" class="admin-tab-content">
                    <div class="institute-management-header">
                        <h3>íŒŒê²¬ í•™ë‹¹ ê´€ë¦¬</h3>
                        <button id="addInstituteBtn" class="btn primary">
                            <i data-lucide="plus"></i>
                            ìƒˆ í•™ë‹¹ ì¶”ê°€
                        </button>
                    </div>
                    <div id="instituteList" class="institute-list">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  í•™ë‹¹ ëª©ë¡ -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ëª¨ë“  ê¸°ì¡´ ëª¨ë‹¬ë“¤ í¬í•¨ (êµêµ¬ ì‹ ì²­, ì˜ìˆ˜ì¦, ì˜ˆì‚° ì„¤ì • ë“±) -->
    <!-- ì—¬ê¸°ì—ëŠ” ê¸°ì¡´ index.htmlì˜ ëª¨ë“  ëª¨ë‹¬ë“¤ì´ í¬í•¨ë©ë‹ˆë‹¤ -->
    
    <!-- ì˜ˆì‚° ì„¤ì • ëª¨ë‹¬ (ê´€ë¦¬ììš©) -->
    <div id="budgetSettingsModal" class="modal">
        <div class="modal-content large">
            <h3>ë¶„ì•¼ë³„ ì˜ˆì‚° ì„¤ì •</h3>
            <form id="budgetSettingsForm">
                <div class="budget-settings-info">
                    <p>ê° ë¶„ì•¼ë³„ë¡œ íšŒë‹¹ ì§€ì›ê¸ˆê³¼ ìµœëŒ€ ìƒí•œì„ ì„¤ì •í•˜ì„¸ìš”. í•™ìƒì˜ ìˆ˜ì—…ê³„íšì´ ìŠ¹ì¸ë˜ë©´ ì´ ì„¤ì •ì— ë”°ë¼ ìë™ìœ¼ë¡œ ì˜ˆì‚°ì´ ë°°ì •ë©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="table-container">
                    <table id="budgetSettingsTable" class="budget-settings-table">
                        <thead>
                            <tr>
                                <th>ë¶„ì•¼</th>
                                <th>íšŒë‹¹ ì§€ì›ê¸ˆ (ì›)</th>
                                <th>ìµœëŒ€ ìƒí•œ (ì›)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                        </tbody>
                    </table>
                </div>
                
                <div class="modal-actions">
                    <button type="button" id="budgetSettingsCancelBtn" class="btn secondary">ì·¨ì†Œ</button>
                    <button type="submit" class="btn primary">ì„¤ì • ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ìˆ˜ì—…ê³„íš ê´€ë¦¬ ëª¨ë‹¬ (ê´€ë¦¬ììš©) -->
    <div id="lessonPlanManagementModal" class="modal">
        <div class="modal-content expanded">
            <h3>ìˆ˜ì—…ê³„íš ìŠ¹ì¸ ê´€ë¦¬</h3>
            <div class="lesson-plan-management-container">
                <div class="management-header">
                    <div class="management-stats">
                        <span id="pendingPlansCount" class="stat-badge pending">ëŒ€ê¸° ì¤‘: 0</span>
                        <span id="approvedPlansCount" class="stat-badge approved">ìŠ¹ì¸ë¨: 0</span>
                        <span id="rejectedPlansCount" class="stat-badge rejected">ë°˜ë ¤ë¨: 0</span>
                    </div>
                    <div class="management-actions">
                        <button id="refreshPlansBtn" class="btn small secondary">
                            <i data-lucide="refresh-cw"></i> ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                </div>
                
                <div id="lessonPlansList" class="lesson-plans-list">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button type="button" id="lessonPlanManagementCloseBtn" class="btn secondary">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Files - Cache Busting Added -->
    <!-- ì„¤ì • íŒŒì¼ì„ ê°€ì¥ ë¨¼ì € ë¡œë“œ -->
    <script src="js/config.js?v=1.3.0"></script>
    <!-- Supabase í´ë¼ì´ì–¸íŠ¸ ë¡œë“œ -->
    <script src="js/supabase-client.js?v=1.3.0"></script>
    <script src="js/utils.js?v=1.3.0"></script>
    <script src="js/auth.js?v=1.3.0"></script>
    <script src="js/lesson-plan.js?v=1.3.0"></script>
    <script src="js/admin.js?v=1.3.0"></script>
    <script src="js/admin-institute.js?v=1.3.0"></script>
    
    <!-- ê´€ë¦¬ì ì „ìš© ì•± ì´ˆê¸°í™” -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ Lucide ì•„ì´ì½˜ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            try {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                    console.log('Lucide icons initialized successfully');
                } else {
                    console.error('Lucide library not loaded');
                }

                // ê´€ë¦¬ì ì „ìš© ì•± ì´ˆê¸°í™”
                initializeAdminApp();
                
            } catch (error) {
                console.error('ê´€ë¦¬ì í˜ì´ì§€ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
            }
        });

        // ê´€ë¦¬ì ì•± ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeAdminApp() {
            // ê´€ë¦¬ì ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
            const adminSession = localStorage.getItem('adminSession');
            if (adminSession) {
                // ì´ë¯¸ ë¡œê·¸ì¸ëœ ìƒíƒœë¼ë©´ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
                document.getElementById('loginPage').classList.remove('active');
                document.getElementById('adminPage').classList.add('active');
                
                // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
                if (typeof initializeAdminDashboard === 'function') {
                    initializeAdminDashboard();
                }
            }

            // ê´€ë¦¬ì ë¡œê·¸ì¸ ì´ë²¤íŠ¸ ì„¤ì •
            setupAdminLoginEvents();
            
            // íƒ­ ì „í™˜ ì´ë²¤íŠ¸ ì„¤ì •
            setupAdminTabs();
        }

        // ê´€ë¦¬ì ë¡œê·¸ì¸ ì´ë²¤íŠ¸ ì„¤ì •
        function setupAdminLoginEvents() {
            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const adminCodeInput = document.getElementById('adminCode');

            if (adminLoginBtn) {
                adminLoginBtn.addEventListener('click', handleAdminLogin);
            }

            if (adminCodeInput) {
                adminCodeInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        handleAdminLogin();
                    }
                });
            }
        }

        // ê´€ë¦¬ì ë¡œê·¸ì¸ ì²˜ë¦¬
        async function handleAdminLogin() {
            const adminCode = document.getElementById('adminCode').value;
            
            if (!adminCode) {
                alert('ê´€ë¦¬ì ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                // ê¸°ì¡´ ì¸ì¦ í•¨ìˆ˜ ì‚¬ìš©
                if (typeof authenticateAdmin === 'function') {
                    const isAuthenticated = await authenticateAdmin(adminCode);
                    if (isAuthenticated) {
                        // ë¡œê·¸ì¸ ì„±ê³µ
                        localStorage.setItem('adminSession', 'true');
                        document.getElementById('loginPage').classList.remove('active');
                        document.getElementById('adminPage').classList.add('active');
                        
                        // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
                        if (typeof initializeAdminDashboard === 'function') {
                            initializeAdminDashboard();
                        }
                    } else {
                        alert('ì˜ëª»ëœ ê´€ë¦¬ì ì½”ë“œì…ë‹ˆë‹¤.');
                    }
                }
            } catch (error) {
                console.error('ê´€ë¦¬ì ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
                alert('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ê´€ë¦¬ì íƒ­ ì „í™˜ ì„¤ì •
        function setupAdminTabs() {
            const tabButtons = document.querySelectorAll('.admin-tab-btn');
            const tabContents = document.querySelectorAll('.admin-tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // ëª¨ë“  íƒ­ ë²„íŠ¼ê³¼ ì»¨í…ì¸  ë¹„í™œì„±í™”
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // í´ë¦­ëœ íƒ­ í™œì„±í™”
                    this.classList.add('active');
                    
                    // í•´ë‹¹ ì»¨í…ì¸  í™œì„±í™”
                    const tabId = this.id.replace('Tab', 'Requests');
                    if (tabId === 'instituteRequests') {
                        document.getElementById('instituteManagement').classList.add('active');
                        // í•™ë‹¹ ê´€ë¦¬ íƒ­ì´ í™œì„±í™”ë  ë•Œ ì´ˆê¸°í™”
                        setTimeout(() => {
                            if (typeof initializeInstituteManagement === 'function') {
                                initializeInstituteManagement();
                            }
                        }, 100);
                    } else {
                        const content = document.getElementById(tabId);
                        if (content) {
                            content.classList.add('active');
                        }
                    }
                });
            });
        }

        // ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
        document.addEventListener('click', function(e) {
            if (e.target.id === 'adminLogout') {
                localStorage.removeItem('adminSession');
                location.reload();
            }
        });
    </script>
    
    <!-- Lucide ì•„ì´ì½˜ ì´ˆê¸°í™” -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì•„ì´ì½˜ ë‹¤ì‹œ ì—…ë°ì´íŠ¸
        setTimeout(() => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }, 100);
    </script>
</body>
</html>
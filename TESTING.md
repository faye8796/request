# 🧪 수업계획 저장 기능 테스트 가이드

## 📋 테스트 개요

수업계획 저장 문제가 해결되었는지 확인하기 위한 단계별 테스트 가이드입니다.

## 🔧 사전 준비

### 1. 브라우저 설정
- **권장 브라우저**: Chrome, Firefox, Safari 최신 버전
- **개발자 도구 열기**: `F12` 또는 `Ctrl + Shift + I`
- **Console 탭 활성화**: 디버깅 로그 확인용

### 2. 테스트 계정
```
👤 테스트 학생 계정:
- 이름: 김테스트
- 생년월일: 1995-01-01

🔐 관리자 계정:
- 관리자 코드: admin123
```

## 🚀 테스트 시나리오

### 시나리오 1: 새로운 수업계획 작성

1. **로그인**
   ```
   1. 홈페이지 접속
   2. "학생 로그인" 탭 선택
   3. 이름: 김테스트
   4. 생년월일: 1995-01-01
   5. "학생 로그인" 버튼 클릭
   ```

2. **수업계획 페이지 접속**
   ```
   1. 학생 대시보드에서 "수업 계획" 버튼 클릭
   2. 수업계획 작성 페이지 로드 확인
   ```

3. **기본 정보 입력**
   ```
   1. 파견 시작일: 2025-08-30
   2. 파견 종료일: 2025-12-10
   3. 총 수업 횟수: 12
   4. 주당 평균 수업 횟수: 3 (자동 계산됨)
   ```

4. **수업 계획표 생성**
   ```
   1. "수업 계획표 생성" 버튼 클릭
   2. 성공 메시지 확인: "12개의 수업 계획표가 생성되었습니다..."
   3. 수업 계획표 섹션이 나타나는지 확인
   ```

5. **임시저장 테스트**
   ```
   1. 수업 주제/내용 일부 작성 (선택사항)
   2. "임시 저장" 버튼 클릭
   3. 성공 메시지 확인: "수업계획이 임시저장되었습니다..."
   ```

6. **최종 제출 테스트**
   ```
   1. "수업 계획 완료" 버튼 클릭
   2. 확인 다이얼로그에서 "확인" 클릭
   3. 성공 메시지 확인: "수업계획이 완료되었습니다!"
   4. 학생 대시보드로 자동 이동 확인
   ```

### 시나리오 2: 기존 수업계획 수정

1. **수업계획 페이지 재접속**
   ```
   1. 학생 대시보드에서 "수업 계획" 버튼 클릭
   2. 기존 데이터가 자동으로 로드되는지 확인
   ```

2. **수정 및 재저장**
   ```
   1. 기본 정보나 수업 내용 수정
   2. "임시 저장" 또는 "수업 계획 완료" 클릭
   3. 정상적으로 저장되는지 확인
   ```

## 🔍 예상 로그 메시지

### 정상 작동 시 Console 로그
```
✅ Supabase client initialized successfully - Enhanced version with RLS fix
🎓 LessonPlanManager 초기화 시작
✅ LessonPlanManager 초기화 완료
📋 수업 계획표 생성 시작
📚 12개 수업 생성됨
✅ 수업 계획표 생성 완료
💾 임시저장 시작
👤 사용자 확인: [UUID]
🚀 Supabase에 임시저장 요청
✅ 임시저장 성공: [UUID]
```

### 오류 발생 시 확인사항
```
❌ 만약 이런 오류가 보인다면:
- "Supabase client initialization failed": 네트워크 연결 확인
- "로그인이 필요합니다": 재로그인 시도
- "수업계획 수정 기간이 종료되었습니다": 테스트 모드 확인
```

## 🧪 고급 테스트 (관리자용)

### 테스트 모드 확인
```javascript
// 개발자 도구 Console에서 실행
await SupabaseAPI.getSystemSettings()
// test_mode: true 인지 확인
```

### 데이터베이스 직접 확인
```javascript
// 수업계획 데이터 확인
await SupabaseAPI.getStudentLessonPlan('사용자ID')
```

### RLS 상태 확인
```javascript
// API 연결 테스트
await SupabaseAPI.testConnection()
// { success: true, message: "데이터베이스 연결 성공" }
```

## 🚨 문제 해결

### 일반적인 문제들

1. **"수업계획 저장 중 오류가 발생했습니다"**
   ```
   해결 방법:
   1. 페이지 새로고침 (F5)
   2. 브라우저 캐시 삭제
   3. 다른 브라우저에서 테스트
   4. 네트워크 연결 확인
   ```

2. **"로그인이 필요합니다"**
   ```
   해결 방법:
   1. 로그아웃 후 재로그인
   2. 브라우저 쿠키/로컬스토리지 삭제
   3. 시크릿 모드에서 테스트
   ```

3. **수업 계획표가 생성되지 않음**
   ```
   해결 방법:
   1. 필수 필드 모두 입력했는지 확인
   2. 날짜 형식이 올바른지 확인
   3. 총 수업 횟수가 1-100 범위인지 확인
   ```

### 디버깅 명령어
```javascript
// 현재 사용자 확인
AuthManager.getCurrentUser()

// 시스템 설정 확인
await SupabaseAPI.getSystemSettings()

// 테스트 모드 토글
await SupabaseAPI.toggleTestMode()

// API 연결 상태 확인
await SupabaseAPI.testConnection()
```

## ✅ 테스트 완료 체크리스트

- [ ] 학생 로그인 성공
- [ ] 수업계획 페이지 접속 성공
- [ ] 기본 정보 입력 및 계획표 생성 성공
- [ ] 임시저장 기능 정상 작동
- [ ] 최종 제출 기능 정상 작동
- [ ] 기존 데이터 로드 정상 작동
- [ ] 수정 후 재저장 정상 작동
- [ ] 에러 로그 없음
- [ ] 사용자 친화적인 메시지 표시

## 📞 지원

테스트 중 문제가 발생하면:

1. **Console 로그 캡처**: 개발자 도구의 전체 로그 복사
2. **재현 단계 기록**: 어떤 순서로 문제가 발생했는지 상세히 기록
3. **브라우저 정보**: 브라우저 종류 및 버전 확인
4. **네트워크 상태**: 인터넷 연결 상태 확인

---
**테스트 날짜**: 2025-06-13  
**버전**: v2.1.0  
**담당자**: faye8796

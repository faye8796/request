<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š ë¬¸í™”ìˆ˜ì—… ë§Œì¡±ë„ ì¡°ì‚¬ | Cultural Class Survey</title>
    
    <!-- Open Graph ë©”íƒ€íƒœê·¸ -->
    <meta property="og:title" content="ì„¸ì¢…í•™ë‹¹ ë¬¸í™”ìˆ˜ì—… ë§Œì¡±ë„ ì¡°ì‚¬">
    <meta property="og:description" content="ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì˜ ìˆ˜ì—…ì— ëŒ€í•œ ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”.">
    <meta property="og:type" content="website">
    
    <style>
        /* ì „ì²´ ìŠ¤íƒ€ì¼ - í´ë¦°í•˜ê³  êµ­ì œì ì¸ ë””ìì¸ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
            line-height: 1.6;
        }
        
        .survey-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        /* í—¤ë” */
        .survey-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .survey-header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        
        .survey-header .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 0.5rem;
        }
        
        .survey-header .description {
            font-size: 0.95rem;
            opacity: 0.9;
            margin-top: 1rem;
            line-height: 1.5;
        }
        
        /* ì„¤ë¬¸ ë³¸ë¬¸ */
        .survey-body {
            padding: 2rem;
        }
        
        .question-section {
            margin-bottom: 2.5rem;
            padding-bottom: 2.5rem;
            border-bottom: 2px solid #f3f4f6;
        }
        
        .question-section:last-child {
            border-bottom: none;
        }
        
        .question-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            min-width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-weight: 600;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }
        
        .question-content {
            flex: 1;
        }
        
        .question-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .question-title-en {
            font-size: 0.95rem;
            color: #6b7280;
            font-weight: 400;
        }
        
        /* ë‹¨ê³„ë³„ ì„ íƒ ë“œë¡­ë‹¤ìš´ */
        .cascading-selects {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .select-wrapper {
            position: relative;
        }
        
        .select-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .select-wrapper select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 3rem;
        }
        
        .select-wrapper select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .select-wrapper select:disabled {
            background-color: #f9fafb;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        /* ë¼ë””ì˜¤ ë²„íŠ¼ ê·¸ë£¹ */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .radio-option {
            position: relative;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .radio-option:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }
        
        .radio-option input[type="radio"] {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #667eea;
        }
        
        .radio-option.selected {
            border-color: #667eea;
            background: #eff6ff;
        }
        
        .option-text-ko {
            font-weight: 500;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }
        
        .option-text-en {
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        /* ë¦¬ì»¤íŠ¸ ì²™ë„ (5ì ) */
        .likert-scale {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .likert-option {
            position: relative;
            text-align: center;
        }
        
        .likert-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .likert-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem 0.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            min-height: 110px;
            justify-content: center;
        }
        
        .likert-label:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }
        
        .likert-option input[type="radio"]:checked + .likert-label {
            border-color: #667eea;
            background: #eff6ff;
            font-weight: 600;
        }
        
        .likert-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.5rem;
        }
        
        .likert-text-ko {
            font-size: 0.9rem;
            color: #1f2937;
            margin-bottom: 0.25rem;
            text-align: center;
        }
        
        .likert-text-en {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: center;
        }
        
        /* ì œì¶œ ë²„íŠ¼ */
        .submit-section {
            padding: 2rem;
            background: #f8f9fa;
            border-top: 2px solid #e5e7eb;
        }
        
        .submit-button {
            width: 100%;
            padding: 1.25rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .submit-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .submit-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        /* ì™„ë£Œ ë©”ì‹œì§€ */
        .thank-you-message {
            display: none;
            text-align: center;
            padding: 4rem 2rem;
        }
        
        .thank-you-message.show {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .thank-you-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            color: #10b981;
        }
        
        .thank-you-message h2 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        
        .thank-you-message p {
            font-size: 1.1rem;
            color: #6b7280;
            line-height: 1.6;
        }
        
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ì—ëŸ¬ ë©”ì‹œì§€ */
        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #dc2626;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .survey-header {
                padding: 2rem 1.5rem;
            }
            
            .survey-header h1 {
                font-size: 1.5rem;
            }
            
            .survey-header .subtitle {
                font-size: 1rem;
            }
            
            .survey-body {
                padding: 1.5rem;
            }
            
            .question-title {
                font-size: 1rem;
            }
            
            .likert-scale {
                grid-template-columns: repeat(5, 1fr);
                gap: 0.5rem;
            }
            
            .likert-label {
                padding: 0.75rem 0.25rem;
                min-height: 100px;
            }
            
            .likert-number {
                font-size: 1.25rem;
            }
            
            .likert-text-ko {
                font-size: 0.75rem;
            }
            
            .likert-text-en {
                font-size: 0.65rem;
            }
        }
        
        @media (max-width: 480px) {
            .likert-scale {
                gap: 0.25rem;
            }
            
            .likert-label {
                padding: 0.5rem 0.15rem;
                min-height: 90px;
            }
            
            .likert-number {
                font-size: 1.1rem;
            }
            
            .likert-text-ko,
            .likert-text-en {
                font-size: 0.65rem;
            }
        }
    </style>
</head>
<body>
    <div class="survey-container">
        <!-- ì„¤ë¬¸ í—¤ë” -->
        <div class="survey-header">
            <h1>ğŸ“Š ë¬¸í™”ìˆ˜ì—… ë§Œì¡±ë„ ì¡°ì‚¬</h1>
            <p class="subtitle">Cultural Class Satisfaction Survey</p>
            <p class="description">
                ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì˜ ìˆ˜ì—…ì— ëŒ€í•œ ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”.<br>
                Please share your valuable feedback on the cultural class.
            </p>
        </div>
        
        <!-- ì„¤ë¬¸ ë³¸ë¬¸ -->
        <div class="survey-body" id="surveyBody">
            <div class="error-message" id="errorMessage"></div>
            
            <form id="surveyForm">
                <!-- Q1: ìˆ˜ì—… ì„ íƒ (4ë‹¨ê³„: êµ­ê°€ â†’ í•™ë‹¹ â†’ ë¬¸í™”ì¸í„´ â†’ ìˆ˜ì—…) -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">1</span>
                        <div class="question-content">
                            <div class="question-title">ì–´ëŠ ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì˜ ìˆ˜ì—…ì„ ë“¤ìœ¼ì…¨ë‚˜ìš”?</div>
                            <div class="question-title-en">Which cultural intern's class did you attend?</div>
                        </div>
                    </div>
                    
                    <div class="cascading-selects">
                        <div class="select-wrapper">
                            <label class="select-label">1ï¸âƒ£ êµ­ê°€ / Country</label>
                            <select id="countrySelect" required>
                                <option value="">ì„ íƒí•˜ì„¸ìš” / Please Select</option>
                            </select>
                        </div>
                        
                        <div class="select-wrapper">
                            <label class="select-label">2ï¸âƒ£ ì„¸ì¢…í•™ë‹¹ / Sejong Institute</label>
                            <select id="instituteSelect" disabled required>
                                <option value="">ë¨¼ì € êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš” / Select Country First</option>
                            </select>
                        </div>
                        
                        <div class="select-wrapper">
                            <label class="select-label">3ï¸âƒ£ ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ / Cultural Intern Teacher</label>
                            <select id="internSelect" disabled required>
                                <option value="">ë¨¼ì € í•™ë‹¹ì„ ì„ íƒí•˜ì„¸ìš” / Select Institute First</option>
                            </select>
                        </div>
                        
                    </div>
                </div>
                
                <!-- Q2: ì°¸ì—¬ ê²½í—˜ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">2</span>
                        <div class="question-content">
                            <div class="question-title">ì´ì „ì—ë„ ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì´ ìš´ì˜í•˜ëŠ” ë¬¸í™”ìˆ˜ì—…ì— ì°¸ì—¬í•œ ê²½í—˜ì´ ìˆë‚˜ìš”?</div>
                            <div class="question-title-en">How many times have you joined a culture class by a cultural intern?</div>
                        </div>
                    </div>
                    
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="participation_count" value="first" required>
                            <div class="option-text-ko">â‘  ì²˜ìŒ</div>
                            <div class="option-text-en">First time</div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="participation_count" value="second">
                            <div class="option-text-ko">â‘¡ ë‘ ë²ˆì§¸</div>
                            <div class="option-text-en">Second</div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="participation_count" value="third_or_more">
                            <div class="option-text-ko">â‘¢ ì„¸ ë²ˆì§¸ ì´ìƒ</div>
                            <div class="option-text-en">Third or more</div>
                        </label>
                    </div>
                </div>
                
                <!-- Q3: ìˆ˜ê°•ìƒ ëª¨ì§‘ ì•ˆë‚´ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">3</span>
                        <div class="question-content">
                            <div class="question-title">ìˆ˜ê°•ìƒ ëª¨ì§‘ ì•ˆë‚´(ìˆ˜ì—…ë‚´ìš©, ì‹œê°„, ì„ ìƒë‹˜ ë“± ìˆ˜ì—…ì •ë³´)ê°€ ì¶©ë¶„í•˜ê³  ì ì ˆí–ˆì–´ìš”.</div>
                            <div class="question-title-en">The class recruitment information (class content, time, instructor, etc.) was sufficient and appropriate.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q3" value="1" id="q3-1">
                            <label for="q3-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>

                        <div class="likert-option">
                            <input type="radio" name="q3" value="2" id="q3-2">
                            <label for="q3-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        
                        <div class="likert-option">
                            <input type="radio" name="q3" value="3" id="q3-3">
                            <label for="q3-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        
                        <div class="likert-option">
                            <input type="radio" name="q3" value="4" id="q3-4">
                            <label for="q3-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q3" value="5" id="q3-5" required>
                            <label for="q3-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q4: ìˆ˜ì—… ë‚´ìš© í¥ë¯¸ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">4</span>
                        <div class="question-content">
                            <div class="question-title">ìˆ˜ì—… ë‚´ìš©ì´ í¥ë¯¸ë¡œì› ê³  í™œë™ë„ ì¦ê±°ì› ì–´ìš”.</div>
                            <div class="question-title-en">The class content was interesting, and the activities were enjoyable.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q4" value="1" id="q4-1" required>
                            <label for="q4-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q4" value="2" id="q4-2">
                            <label for="q4-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q4" value="3" id="q4-3">
                            <label for="q4-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q4" value="4" id="q4-4">
                            <label for="q4-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q4" value="5" id="q4-5">
                            <label for="q4-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q5: ìˆ˜ì—… êµ¬ì„± ì ì ˆì„± -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">5</span>
                        <div class="question-content">
                            <div class="question-title">ìˆ˜ì—… ì‹œê°„, ìˆ˜ì—… ë‚´ìš© ë° êµ¬ì„±, ë¬¸í™”êµêµ¬ ì¤€ë¹„ ë“±ì´ ì ì ˆí–ˆì–´ìš”.</div>
                            <div class="question-title-en">The class time, content and structure, and preparation of cultural teaching materials were appropriate.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q5" value="1" id="q5-1" required>
                            <label for="q5-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q5" value="2" id="q5-2">
                            <label for="q5-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q5" value="3" id="q5-3">
                            <label for="q5-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q5" value="4" id="q5-4">
                            <label for="q5-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q5" value="5" id="q5-5">
                            <label for="q5-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q6: ê°•ì‚¬ ì†Œí†µ ëŠ¥ë ¥ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">6</span>
                        <div class="question-content">
                            <div class="question-title">ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì€ ìš°ë¦¬ì™€ ì˜ ì†Œí†µí•˜ë©° ì¹œì ˆí•˜ê³  ì ê·¹ì ì´ì—ˆì–´ìš”.</div>
                            <div class="question-title-en">The instructor communicated well with students and was kind and enthusiastic.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q6" value="1" id="q6-1" required>
                            <label for="q6-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q6" value="2" id="q6-2">
                            <label for="q6-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q6" value="3" id="q6-3">
                            <label for="q6-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q6" value="4" id="q6-4">
                            <label for="q6-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q6" value="5" id="q6-5">
                            <label for="q6-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q7: ì„¤ëª… ëª…í™•ì„± -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">7</span>
                        <div class="question-content">
                            <div class="question-title">ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì˜ ì„¤ëª…ì€ ëª…í™•í•˜ê³ , ì´í•´í•˜ê¸° ì‰¬ì› ì–´ìš”.</div>
                            <div class="question-title-en">The instructor's explanations were clear and easy to understand.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q7" value="1" id="q7-1" required>
                            <label for="q7-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q7" value="2" id="q7-2">
                            <label for="q7-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q7" value="3" id="q7-3">
                            <label for="q7-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q7" value="4" id="q7-4">
                            <label for="q7-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q7" value="5" id="q7-5">
                            <label for="q7-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q8: ë¬¸í™” í•™ìŠµ íš¨ê³¼ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">8</span>
                        <div class="question-content">
                            <div class="question-title">ì´ë²ˆ ë¬¸í™”ìˆ˜ì—…ì„ í†µí•´ í•œêµ­ë¬¸í™”ì— ëŒ€í•´ ìƒˆë¡­ê²Œ ë°°ìš°ê±°ë‚˜ ëŠë‚€ ì ì´ ë§ì•„ìš”.</div>
                            <div class="question-title-en">I learned many new things about Korean culture and gained new insights through this class.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q8" value="1" id="q8-1" required>
                            <label for="q8-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q8" value="2" id="q8-2">
                            <label for="q8-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q8" value="3" id="q8-3">
                            <label for="q8-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q8" value="4" id="q8-4">
                            <label for="q8-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q8" value="5" id="q8-5">
                            <label for="q8-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q9: ì „ë°˜ì  ë§Œì¡±ë„ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">9</span>
                        <div class="question-content">
                            <div class="question-title">ì „ë°˜ì ìœ¼ë¡œ ì´ë²ˆ ë¬¸í™” ìˆ˜ì—…ì— ë§Œì¡±í•´ìš”.</div>
                            <div class="question-title-en">Overall, I'm satisfied with this class.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q9" value="1" id="q9-1" required>
                            <label for="q9-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q9" value="2" id="q9-2">
                            <label for="q9-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q9" value="3" id="q9-3">
                            <label for="q9-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q9" value="4" id="q9-4">
                            <label for="q9-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q9" value="5" id="q9-5">
                            <label for="q9-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Q10: ì¶”ì²œ ì˜í–¥ -->
                <div class="question-section">
                    <div class="question-header">
                        <span class="question-number">10</span>
                        <div class="question-content">
                            <div class="question-title">ì´ ë¬¸í™” ìˆ˜ì—…ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì¶”ì²œí•˜ê³  ì‹¶ì–´ìš”.</div>
                            <div class="question-title-en">I would recommend this cultural class to other people.</div>
                        </div>
                    </div>
                    
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="q10" value="1" id="q10-1" required>
                            <label for="q10-1" class="likert-label">
                                <span class="likert-number">1</span>
                                <span class="likert-text-ko">ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Strongly Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q10" value="2" id="q10-2">
                            <label for="q10-2" class="likert-label">
                                <span class="likert-number">2</span>
                                <span class="likert-text-ko">ê·¸ë ‡ì§€ ì•Šë‹¤</span>
                                <span class="likert-text-en">Disagree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q10" value="3" id="q10-3">
                            <label for="q10-3" class="likert-label">
                                <span class="likert-number">3</span>
                                <span class="likert-text-ko">ë³´í†µì´ë‹¤</span>
                                <span class="likert-text-en">Neutral</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q10" value="4" id="q10-4">
                            <label for="q10-4" class="likert-label">
                                <span class="likert-number">4</span>
                                <span class="likert-text-ko">ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Agree</span>
                            </label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="q10" value="5" id="q10-5">
                            <label for="q10-5" class="likert-label">
                                <span class="likert-number">5</span>
                                <span class="likert-text-ko">ë§¤ìš° ê·¸ë ‡ë‹¤</span>
                                <span class="likert-text-en">Strongly Agree</span>
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- ì œì¶œ ë²„íŠ¼ -->
        <div class="submit-section" id="submitSection">
            <button type="submit" form="surveyForm" class="submit-button" id="submitBtn">
                ì„¤ë¬¸ ì œì¶œí•˜ê¸° / Submit Survey
            </button>
        </div>
        
        <!-- ì™„ë£Œ ë©”ì‹œì§€ -->
        <div class="thank-you-message" id="thankYouMessage">
            <svg class="thank-you-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h2>ê°ì‚¬í•©ë‹ˆë‹¤! / Thank You!</h2>
            <p>
                ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤. ë” ë‚˜ì€ ìˆ˜ì—…ì„ ìœ„í•´ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.<br>
                Thank you for your valuable feedback. We will strive for better classes.
            </p>
        </div>
    </div>
    
    <!-- Supabase JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module">
        // Supabase ì´ˆê¸°í™”
        const SUPABASE_URL = 'https://aazvopacnbbkvusihqva.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFhenZvcGFjbmJia3Z1c2locXZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3OTQyMjQsImV4cCI6MjA2NTM3MDIyNH0.0NXI_tohwFCOl3xY4b1jIlxQR_zGTS9tWDM2OFxTq4s';
        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // ì „ì—­ ë°ì´í„°
        let countries = [];
        let institutesByCountry = new Map();
        let selectedCountry = null;
        let selectedInstituteId = null;
        let selectedInternId = null;
        
        
        // êµ­ê°€ë³„ ì˜ë¬¸ëª… ë§¤í•‘ (í”„ë‘ìŠ¤ ì¶”ê°€)
        const countryEnglishNames = {
            'ë…ì¼': 'Germany',
            'ë¼ì˜¤ìŠ¤': 'Laos',
            'ë£¨ë§ˆë‹ˆì•„': 'Romania',
            'ë¦¬íˆ¬ì•„ë‹ˆì•„': 'Lithuania',
            'ë¯¸êµ­': 'United States',
            'ë² íŠ¸ë‚¨': 'Vietnam',
            'ì‚¬ìš°ë””ì•„ë¼ë¹„ì•„': 'Saudi Arabia',
            'ìŠ¤ì›¨ë´': 'Sweden',
            'ì—ìŠ¤ì™€í‹°ë‹ˆ': 'Eswatini',
            'ì—ìŠ¤í† ë‹ˆì•„': 'Estonia',
            'ì˜êµ­': 'United Kingdom',
            'ìš°ë£¨ê³¼ì´': 'Uruguay',
            'ìš°ì¦ˆë² í‚¤ìŠ¤íƒ„': 'Uzbekistan',
            'ì´ì§‘íŠ¸': 'Egypt',
            'ì¸ë„': 'India',
            'ì¸ë„ë„¤ì‹œì•„': 'Indonesia',
            'ì¤‘êµ­': 'China',
            'ì¤‘êµ­ íƒ€ì´ì™„': 'Taiwan, China', 
            'ì²´ì½”': 'Czech Republic',
            'ìº„ë³´ë””ì•„': 'Cambodia',
            'ìºë‚˜ë‹¤': 'Canada',
            'ì¼€ëƒ': 'Kenya',
            'ì½œë¡¬ë¹„ì•„': 'Colombia',
            'í¬ë¡œì•„í‹°ì•„': 'Croatia',
            'í‚¤ë¥´ê¸°ìŠ¤ìŠ¤íƒ„': 'Kyrgyzstan',
            'íƒœêµ­': 'Thailand',
            'í´ë€ë“œ': 'Poland',
            'í”„ë‘ìŠ¤': 'France',
            'í•„ë¦¬í•€': 'Philippines',
            'í—ê°€ë¦¬': 'Hungary'
        };
        
        // ìš”ì†Œ ì°¸ì¡°
        const countrySelect = document.getElementById('countrySelect');
        const instituteSelect = document.getElementById('instituteSelect');
        const internSelect = document.getElementById('internSelect');
        const surveyForm = document.getElementById('surveyForm');
        const submitBtn = document.getElementById('submitBtn');
        const errorMessage = document.getElementById('errorMessage');
        const surveyBody = document.getElementById('surveyBody');
        const submitSection = document.getElementById('submitSection');
        const thankYouMessage = document.getElementById('thankYouMessage');
        
        // êµ­ê°€ëª… ì¶”ì¶œ í•¨ìˆ˜
        function extractCountryName(instituteName) {
            const countryNames = Object.keys(countryEnglishNames);
            for (const country of countryNames) {
                if (instituteName.startsWith(country)) {
                    return country;
                }
            }
            // ì²« ë²ˆì§¸ ê³µë°± ì „ê¹Œì§€ê°€ êµ­ê°€ëª…
            const spaceIndex = instituteName.indexOf(' ');
            return spaceIndex > 0 ? instituteName.substring(0, spaceIndex) : instituteName;
        }
        
        // ì´ˆê¸°í™”
        async function init() {
            try {
                // ì œì¶œ ì™„ë£Œ ì—¬ë¶€ í™•ì¸ (ì¿ í‚¤ ì²´í¬)
                const hasSubmitted = getCookie('survey_submitted');
                if (hasSubmitted === 'true') {
                    // ì´ë¯¸ ì œì¶œí•œ ê²½ìš° ì™„ë£Œ ë©”ì‹œì§€ë§Œ í‘œì‹œ
                    surveyBody.style.display = 'none';
                    submitSection.style.display = 'none';
                    thankYouMessage.classList.add('show');
                    return;
                }

                await loadCountriesAndInstitutes();
                setupEventListeners();
            } catch (error) {
                console.error('ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                showError('ì‹œìŠ¤í…œ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
            }
        }        
        
        // êµ­ê°€ ë° í•™ë‹¹ ëª©ë¡ ë¡œë“œ
        async function loadCountriesAndInstitutes() {
            try {
                const { data, error } = await supabaseClient
                    .from('institutes')
                    .select('id, name_ko, name_en')
                    .eq('is_active', true)
                    .order('name_ko');
                
                if (error) throw error;
                
                // êµ­ê°€ë³„ë¡œ í•™ë‹¹ ê·¸ë£¹í™”
                const countryMap = new Map();
                data.forEach(institute => {
                    const country = extractCountryName(institute.name_ko);
                    if (!countryMap.has(country)) {
                        countryMap.set(country, []);
                    }
                    countryMap.get(country).push(institute);
                });
                
                // êµ­ê°€ ëª©ë¡ ì •ë ¬
                countries = Array.from(countryMap.keys()).sort();
                institutesByCountry = countryMap;
                
                renderCountryOptions();
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                showError('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // êµ­ê°€ ë“œë¡­ë‹¤ìš´ ë Œë”ë§
        function renderCountryOptions() {
            countrySelect.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš” / Please Select</option>';
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country;
                const englishName = countryEnglishNames[country] || country;
                option.textContent = `${country} / ${englishName}`;
                countrySelect.appendChild(option);
            });
        }
        
        // í•™ë‹¹ ë“œë¡­ë‹¤ìš´ ë Œë”ë§
        function renderInstituteOptions(country) {
            instituteSelect.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš” / Please Select</option>';
            
            const institutes = institutesByCountry.get(country) || [];
            if (institutes.length === 0) {
                instituteSelect.innerHTML = '<option value="">ë“±ë¡ëœ í•™ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤ / No Institutes Available</option>';
                return;
            }
            
            institutes.forEach(inst => {
                const option = document.createElement('option');
                option.value = inst.id;
                // êµ­ê°€ëª… ì œê±°í•˜ê³  í•™ë‹¹ëª…ë§Œ í‘œì‹œ
                const displayName = inst.name_ko.replace(new RegExp(`^${country}\\s+`), '');
                const displayNameEn = inst.name_en || displayName;
                option.textContent = `${displayName} / ${displayNameEn}`;
                instituteSelect.appendChild(option);
            });
        }
        
        // ë¬¸í™”ì¸í„´ ëª©ë¡ ë¡œë“œ
        async function loadInterns(instituteId) {
            try {
                const selectedInstitute = Array.from(institutesByCountry.values())
                    .flat()
                    .find(i => i.id === instituteId);
                
                if (!selectedInstitute) return;
                
                const { data, error } = await supabaseClient
                    .from('user_profiles')
                    .select('id, name, email')
                    .eq('sejong_institute', selectedInstitute.name_ko);
                
                if (error) throw error;
                
                renderInternOptions(data || []);
            } catch (error) {
                console.error('ë¬¸í™”ì¸í„´ ë¡œë“œ ì‹¤íŒ¨:', error);
                showError('ë¬¸í™”ì¸í„´ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ë¬¸í™”ì¸í„´ ë“œë¡­ë‹¤ìš´ ë Œë”ë§
        function renderInternOptions(interns) {
            internSelect.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš” / Please Select</option>';
            
            if (interns.length === 0) {
                internSelect.innerHTML = '<option value="">ë“±ë¡ëœ ë¬¸í™”ì¸í„´ì´ ì—†ìŠµë‹ˆë‹¤ / No Interns Available</option>';
                return;
            }
            
            interns.forEach(intern => {
                const option = document.createElement('option');
                option.value = intern.id;
                option.textContent = `${intern.name} ì„ ìƒë‹˜ / Teacher ${intern.name}`;
                internSelect.appendChild(option);
            });
        }
        
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // êµ­ê°€ ì„ íƒ
            countrySelect.addEventListener('change', (e) => {
                selectedCountry = e.target.value;
                instituteSelect.disabled = true;
                internSelect.disabled = true;
                
                instituteSelect.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš” / Please Select</option>';
                internSelect.innerHTML = '<option value="">ë¨¼ì € í•™ë‹¹ì„ ì„ íƒí•˜ì„¸ìš” / Select Institute First</option>';
                
                if (selectedCountry) {
                    renderInstituteOptions(selectedCountry);
                    instituteSelect.disabled = false;
                } else {
                    instituteSelect.innerHTML = '<option value="">ë¨¼ì € êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš” / Select Country First</option>';
                }
            });
            
            // í•™ë‹¹ ì„ íƒ
            instituteSelect.addEventListener('change', async (e) => {
                selectedInstituteId = e.target.value;
                internSelect.disabled = true;
                internSelect.innerHTML = '<option value="">ë¡œë”© ì¤‘... / Loading...</option>';
                
                if (selectedInstituteId) {
                    await loadInterns(selectedInstituteId);
                    internSelect.disabled = false;
                } else {
                    internSelect.innerHTML = '<option value="">ë¨¼ì € í•™ë‹¹ì„ ì„ íƒí•˜ì„¸ìš” / Select Institute First</option>';
                }
            });
            
            // ë¬¸í™”ì¸í„´ ì„ íƒ
            internSelect.addEventListener('change', async (e) => {
                selectedInternId = e.target.value;
                
            });
            
            
            // ë¼ë””ì˜¤ ë²„íŠ¼ ì‹œê° íš¨ê³¼
            document.querySelectorAll('.radio-option input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    const group = radio.closest('.radio-group');
                    group.querySelectorAll('.radio-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    radio.closest('.radio-option').classList.add('selected');
                });
            });
            
            // í¼ ì œì¶œ
            surveyForm.addEventListener('submit', handleSubmit);
        }
        
        // í¼ ì œì¶œ ì²˜ë¦¬
        async function handleSubmit(e) {
            e.preventDefault();

            if (!selectedInternId) {
                showError('ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”. / Please select a cultural intern.');
                return;
            }

            const formData = new FormData(surveyForm);

            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="loading-spinner"></span>ì œì¶œ ì¤‘... / Submitting...';

            try {
                const surveyData = {
                    institute_id: selectedInstituteId,
                    intern_id: selectedInternId,
                    participation_count: formData.get('participation_count'),
                    q3_recruitment_info: parseInt(formData.get('q3')),
                    q4_content_interest: parseInt(formData.get('q4')),
                    q5_class_appropriateness: parseInt(formData.get('q5')),
                    q6_instructor_communication: parseInt(formData.get('q6')),
                    q7_explanation_clarity: parseInt(formData.get('q7')),
                    q8_cultural_learning: parseInt(formData.get('q8')),
                    q9_overall_satisfaction: parseInt(formData.get('q9')),
                    q10_recommendation: parseInt(formData.get('q10')),
                    response_language: 'ko'
                };

                const { error } = await supabaseClient
                    .from('class_surveys')
                    .insert([surveyData]);

                if (error) {
                    // ì¤‘ë³µ ì‘ë‹µ ì—ëŸ¬ ì²´í¬
                    if (error.code === '23505') {
                        showError('ì´ë¯¸ ì´ ë¬¸í™”ì¸í„´ ì„ ìƒë‹˜ì˜ ìˆ˜ì—…ì— ëŒ€í•œ ì„¤ë¬¸ì„ ì œì¶œí•˜ì…¨ìŠµë‹ˆë‹¤. / You have already submitted a survey for this instructor.');
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'ì„¤ë¬¸ ì œì¶œí•˜ê¸° / Submit Survey';
                        return;
                    }
                    throw error;
                }

                // âœ… ì œì¶œ ì„±ê³µ ì‹œ ì¿ í‚¤ ì €ì¥ (30ì¼ ìœ íš¨)
                setCookie('survey_submitted', 'true', 30);

                // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                surveyBody.style.display = 'none';
                submitSection.style.display = 'none';
                thankYouMessage.classList.add('show');

                // í˜ì´ì§€ ìµœìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                window.scrollTo({ top: 0, behavior: 'smooth' });

            } catch (error) {
                console.error('ì œì¶œ ì‹¤íŒ¨:', error);
                showError('ì„¤ë¬¸ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”. / Submission failed. Please try again.');
                submitBtn.disabled = false;
                submitBtn.textContent = 'ì„¤ë¬¸ ì œì¶œí•˜ê¸° / Submit Survey';
            }
        }
        
        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.add('show');
            errorMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            setTimeout(() => {
                errorMessage.classList.remove('show');
            }, 5000);
        }
        
        // ===== ì¿ í‚¤ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ =====
        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
            document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function generateSurveyKey(instituteId, internId) {
            return `survey_${instituteId}_${internId}`;
        }
        
        
        // ì´ˆê¸°í™” ì‹¤í–‰
        init();
    </script>
</body>
</html>
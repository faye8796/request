<!-- ðŸš‘ v8.4.1 ì‘ê¸‰ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ - ê¸°ì¡´ ë³µìž¡í•œ ì´ˆê¸°í™” ë¡œì§ì„ ê°„ì†Œí™” -->
<script>
console.log('ðŸš‘ v8.4.1 ì‘ê¸‰ ìˆ˜ì • ì‹œìž‘ - ë¬´í•œ ë£¨í”„ í•´ê²°');

// ðŸ”§ ê°„ì†Œí™”ëœ ì´ˆê¸°í™” ë¡œì§
let initializationCompleted = false;
let emergencyTimeout = null;

// ðŸš‘ ì‘ê¸‰ ì´ˆê¸°í™” í•¨ìˆ˜ (5ì´ˆ í›„ ê°•ì œ ì‹¤í–‰)
function emergencyInitialization() {
    if (initializationCompleted) return;
    
    console.log('ðŸš‘ ì‘ê¸‰ ì´ˆê¸°í™” ì‹¤í–‰');
    initializationCompleted = true;
    
    // ë¡œë”© ìƒíƒœ ì¦‰ì‹œ í•´ì œ
    const globalLoading = document.getElementById('globalLoadingState');
    const app = document.getElementById('app');
    
    if (globalLoading) {
        globalLoading.style.display = 'none';
        console.log('âœ… ë¡œë”© ìƒíƒœ í•´ì œ');
    }
    
    if (app) {
        app.style.display = 'block';
        console.log('âœ… ì•± í‘œì‹œ');
    }
    
    // ðŸ”§ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©ìžë³„ ì²´ë¥˜ì¼ ì„¤ì •
    window.userActivityRequirements = {
        minimumDays: 180,  // ê¸°ë³¸ê°’ ì‚¬ìš©
        maximumDays: 210,  // ê¸°ë³¸ê°’ ì‚¬ìš©
        isLoaded: true     // ë¡œë“œ ì™„ë£Œë¡œ í‘œì‹œ
    };
    
    // UIì— ê¸°ë³¸ê°’ í‘œì‹œ
    const requiredDaysEl = document.getElementById('requiredDays');
    if (requiredDaysEl) {
        requiredDaysEl.textContent = '180';
        requiredDaysEl.classList.remove('loading');
        console.log('âœ… ê¸°ë³¸ ìµœì†Œ ìš”êµ¬ì¼ í‘œì‹œ: 180ì¼');
    }
    
    // ðŸ”§ v8.4.1: ê°„ì†Œí™”ëœ FlightRequestUI ì´ˆê¸°í™” ì‹œë„
    if (window.FlightRequestUI && !window.flightRequestUI) {
        try {
            window.flightRequestUI = new FlightRequestUI();
            console.log('âœ… FlightRequestUI ì´ˆê¸°í™” ì„±ê³µ');
        } catch (error) {
            console.warn('âš ï¸ FlightRequestUI ì´ˆê¸°í™” ì‹¤íŒ¨, ê¸°ë³¸ ê¸°ëŠ¥ë§Œ ì‚¬ìš©:', error);
        }
    }
    
    // ê¸°ë³¸ ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
    setupBasicNavigation();
    
    console.log('âœ… v8.4.1 ì‘ê¸‰ ì´ˆê¸°í™” ì™„ë£Œ');
}

// ðŸ”§ ê¸°ë³¸ ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
function setupBasicNavigation() {
    // ëŒ€ì‹œë³´ë“œ ëŒì•„ê°€ê¸°
    const backBtn = document.getElementById('backToDashboard');
    if (backBtn) {
        backBtn.addEventListener('click', () => {
            window.location.href = 'dashboard.html';
        });
    }
    
    // ì—¬ê¶Œì •ë³´ íŽ˜ì´ì§€ ë²„íŠ¼
    const passportBtn = document.getElementById('passportInfoBtn');
    if (passportBtn) {
        passportBtn.addEventListener('click', () => {
            alert('ì—¬ê¶Œì •ë³´ ê¸°ëŠ¥ì€ ìž ì‹œ í›„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
        });
    }
}

// ðŸš‘ ì¦‰ì‹œ ì‘ê¸‰ íƒ€ì´ë¨¸ ì‹œìž‘ (5ì´ˆ)
emergencyTimeout = setTimeout(() => {
    emergencyInitialization();
}, 5000);

// DOM ë¡œë“œ ì‹œ ì¦‰ì‹œ ì²´í¬
document.addEventListener('DOMContentLoaded', () => {
    console.log('ðŸ“„ DOM ë¡œë“œ ì™„ë£Œ - ì‘ê¸‰ ì´ˆê¸°í™” ì²´í¬');
    
    // 2ì´ˆ í›„ ì‘ê¸‰ ì´ˆê¸°í™” ì‹¤í–‰
    setTimeout(() => {
        emergencyInitialization();
    }, 2000);
});

// ðŸ”§ íŽ˜ì´ì§€ ì™„ì „ ë¡œë“œ ì‹œ ìµœì¢… ì²´í¬
window.addEventListener('load', () => {
    setTimeout(() => {
        emergencyInitialization();
    }, 1000);
});
</script>